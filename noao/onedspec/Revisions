.help revisions Jun88 noao.onedspec
.nf
onedspec$t_sums.x
onedspec$sums.par
    If an image already exists a new query parameter will be used to get
    a new image name.  (3/29/90, Valdes)

onedspec$batchred.cl
    Turned on extinction correction in calibrate for the case the spectra
    are not already extinction calibrated.  (3/29/90, Valdes)

onedspec$ecidentify/ecdofit.x
    When INDEF valued lines were used and features were deleted during
    fitting the resorting of the feature list would get messed up.
    This is a very rare condition which has now been fixed.
    (3/16/90, Valdes)

onedspec$identify/idgdata.x
onedspec$dispcor/dcio.x
onedspec$dispcor/ecdispcor.x
onedspec$dispcor/dispcor.x
onedspec$dispcor/msdispcor.x
onedspec$dispcor/disptable.r
onedspec$sensfunc/sfoutput.x
onedspec$load_hdr.x
onedspec$idsm_keywrds.x
onedspec$t_specplot.x
    Added CDn_n to the set of keywords which may be used for the dispersion.
    (2/8/90, Valdes)

onedspec$splot/eqwidths.x
onedspec$splot/sumflux.x
    The equivalent width is now computed using the ratio of the spectrum
    to the continuum.  The previous approximation is printed in the log
    file for comparison.
    (3/5/90, Valdes)

onedspec$splot/splot.x
onedspec$splot/mktitle.x
    1. For :show added test for existence of spool file and an appropriate
       message if it does not exist.
    2. Increase length of plotted title to SZ_LINE from 32.
       (3/2/90, Valdes)

onedspec$identify/iddofit.x
    When INDEF valued lines were used and features were deleted during
    fitting the resorting of the feature list would get messed up.
    This is a very rare condition which has now been fixed.
    (1/17/90, Valdes)

onedspec$dispcor/ecdispcor.x
    The sum option was actually the same as the average option!
    (1/15/90, Valdes)

199c199
< 	call calloc (spec, nw, TY_REAL) 
---
> 	call malloc (spec, nw, TY_REAL) 
208a209
> 	    call aclrr (Memr[spec], nw)
212c213,218
< 	    case SUM, AVERAGE:
---
> 	    case SUM:
> 		do j = 1, nw
> 		    if (Memr[spec+j-1] != 0.)
> 		        Memr[outdata+j-1] = Memr[outdata+j-1] +
> 			    Memr[spec+j-1]
> 	    case AVERAGE:

onedspec$load_hdr.x
    Add limit checks for NP1 and NP2.  (11/8/89, Valdes)

onedspec$sensfunc/sfstds.x
    The data for apertures which are in the aperture list when the ignoreaps
    flag is set was not being read unless the aperture list included
    aperture 1.  This has been fixed. (11/8/89, Valdes)

onedspec$identify/iddofit.x
    The order of evaluation in complex if statements is not necessarily
    left to right as I'd thought.  This caused a bus error on the
    Convex.  The particular change is as follows:

    old:
	if (rejpts != NULL && Memi[rejpts+k-1] == YES)
	    WTS(id,j) = 0.
	else
	    WTS(id,j) = Memd[wts+k-1]
    new:
	WTS(id,j) = Memd[wts+k-1]
	if (rejpts != NULL)
	    if (Memi[rejpts+k-1] == YES)
		WTS(id,j) = 0.

onedspec$load_hdr.x
    Modified header access to use imaccf to check if header parameter exists
    rather than rely on an error return.  On a Sun3x the error checking
    results in an exception.  (9/28/89, Valdes)

onedspec$t_calibrate.x
    The data outside of calibration range message was changed to print how many
    pixels are outside of the calibration range is printed once.
    (8/8/89, Valdes)

====
V2.8
====

onedspec$idsmtn.h
onedspec$t_subsets.x
onedspec$t_standard.x
onedspec$t_slist.x
onedspec$t_shedit.x
onedspec$t_flatdiv.x
onedspec$t_calibrate.x
onedspec$t_bswitch.x
onedspec$t_addsets.x
onedspec$load_hdr.x
onedspec$idsm_keywrds.x
onedspec$sensfunc/sfimage.x
onedspec$splot/mktitle.x
onedspec$shparams.par
    The exposure time is used as a real rather than an integer (7/11/89, Valdes)

onedspec$t_specplot.x
    The wavelengths were off by one pixel because CRPIX was uninitialized
    and so defaulting to zero instead of 1.  (6/6/89, Valdes)

onedspec$sensfunc/sfstds.x
    Previously added check for INDEF exposure time extended to also check
    for zero exposure time.  (6/1/89, Valdes)

onedspec$dispcor/msio.x
    Because of a recent change in IDENTIFY in which 2D images with a
    second dimension of 1 are treated as 1D images a related change
    was required to allow multispec format spectra to be dispersion
    corrected if there is only one spectrum.  (5/15/89, Valdes)

onedspec$load_hdr.x
    Airmass values less than 1 are mapped in INDEF to force an airmass
    computation.  (5/8/89, Valdes)

onedspec$splot/getimage.x
    If the spectrum has only 1 line (even if it is two dimensional) there
    is no query for the line number.  Also the line number given by the
    user for 2D images is limited to the range of image lines to avoid
    an out of bounds error.  (5/6/89, Valdes)

onedspec$dispcor/dispcor.x
onedspec$dispcor/dcio.x
onedspec$doc/dispcor.hlp
    1. The output spectrum will be of real datatype if the input spectrum
       is short datatype.
    2. The last dispersion function defined for a 2D image is used for
       all lines of a 2D image.
       (5/6/89, Valdes)

onedspec$doc/dispcor.hlp
    Fixed mistake in description of the ignoreaps parameter.  (5/6/89, Valdes)

onedspec$identify/identify.h
onedspec$identify/*.x
    1.  Added weights to the IDENTIFY data structure.
    2.  Modified files to use the weights parameter.
    3.  The weights are currently used to flag iteratively rejected points
	during fitting of the dispersion function.
    4.  Reidentify now prints the RMS of only those lines used in the fit
	and shows the number of points fit.
    5.  The database files now include a column for the weights.
    (5/5/89, Valdes)

onedspec$t_standard.x
onedspec$standard.par
    1.  A warning message is printed if the exposure time is not found.
    2.  Removed ennumerated value in parameter file.
    (4/10/89, Valdes)

onedspec$sensfunc/sfstds.x
    1.	Standard values with negative counts are ignored thus avoiding
	arithmetic problems.
    2.	Warning message is printed if the exposure time in not defined and
    	a value of 1 is used.  (4/10/89, Valdes)

onedspec$dispcor/msio.x +
onedspec$dispcor/msdispcor.com +
onedspec$dispcor/msdispcor.x +
onedspec$t_msselect.x +
onedspec$dispcor/dispcor.x
onedspec$dispcor/mkpkg
onedspec$mkpkg
onedspec$x_onedspec.x
    1.  New task MSDISPCOR to make dispersion correction in related
	spectra in "multispec" format.  This is a cross between
	ECDISPCOR and DISPCOR.
    2.  New tasks MSSELECT and ECSELECT to extract subsets of spectra
	from echelle and multispec format.  ECSELECT is simply an
	alternate task name for MSSELECT.
    3.  These new tasks use the procedures in the ONEDSPEC object
	library but appear as logical tasks in the new MSRED package
	and in the ECHELLE package.
	(3/29/89, Valdes)

onedspec$dispcor/dispcor.x
    When not flux conserving the procedure asieval was being called
    with a double value instead of a real giving completely incorrect
    results.  (3/22/89, Valdes)

onedspec$dispcor/refmatch.x
    There was a bug in the matching option in which the object image was
    begin substituted for the reference image.  (3/14/89, Valdes)

onedspec$t_specplot.x
onedspec$splot.par
onedspec$splot/wrspect.x
onedspec$load_hdr.x
onedspec$identify/iddb.x
    1.  Modified SPECPLOT to accept "multispec" and "echelle" formats.
    2.  Modified SPLOT to accept "multispec" format for output.  This is
	only cosmetic since it is the same as "echelle" format.
    3.  Modified ONEDSPEC header reader to accept "multispec" format.
	This is only cosmetic since it is the same as "echelle" format.
    4.  Modified IDENTIFY to not include the image section in the REFSPEC
	parameter for use with "multispec" format.
    (3/8/89, Valdes)

onedspec$dispcor/dispcor.x
onedspec$doc/dispcor.hlp
    Simple modification to allow task to operate on all lines in a 2D
    image.  This is how the old program also worked.  (3/8/89, Valdes)

onedspec$t_calibrate.x
    1.	CALIBRATE did not take the differing lengths of the echelle orders
	into account and so gave many warnings about spectrum extends outside
	of flux calibration limits.
    2.	The warning is no only printed once per spectrum/order rather than
	for each pixel.
    (2/27/89, Valdes)

onedspec$t_specplot.x
    Made CRPIX1 a real valued parameter. (2/27/89, Valdes)

onedspec$t_widstape.x
	The function mtfile is now used to determine if the input file is
	a mag tape.  Previously, the code was checking that the first two
	letters of the input file were 'mt', which fails for remote tape
	drives.  (2/22/89 ShJ)

onedspec$doc/refspectra.hlp
    A new help page for the refspectra task has been installed.
    (2/27/88, Davis)

onedspec$doc/continuum.hlp
    Added a warning about near zero divisions.  (2/14/89, Valdes)

onedspec$identify/idlinelist.x
onedspec$ecidentify/eclinelist.x
    Setting the coordinate line list to null no longer issues a warning.
    (2/13/89, Valdes)

onedspec$specplot.x
onedspec$doc/specplot.hlp
noao$lib/scr/specplot.key
    1. Added vertical shifts in scale.
    2. Added horizontal shifts in velocity.
    3. Added velocity and redshift colon commands.
    (2/8/89, Valdes)

onedspec$splot/splot.x
    The default key now prints the spectrum value at the x coordinate in
    addition to the cursor x, y coordinates.  (2/7/89, Valdes)

onedspec$dispcor/dispcor.x
onedspec$dispcor/ecdispcor.x
onedspec$dispcor.par
onedspec$ecdispcor.par
imred$coude/dispcor.par
imred$echelle/ecdispcor.par
imred$iids/dispcor.par
imred$irs/dispcor.par
imred$specphot/dispcor.par
onedspec$doc/dispcor.hlp
imred$echelle/doc/ecdispcor.hlp
    Changed "override" parameter to "rebin".  Also rebin=no acts only
    on nondispersion corrected spectra while rebin=yes acts only on
    dispersion corrected spectra.  (2/2/89, Valdes)

onedspec$dispcor/refaverage.x
onedspec$dispcor/reffollow.x
onedspec$dispcor/refgspec.x
onedspec$dispcor/refinterp.x
onedspec$dispcor/refmatch.x
onedspec$dispcor/refnearest.x
onedspec$dispcor/refprecede.x
onedspec$refspectra.par
onedspec$doc/refspectra.hlp
imred$coude/refspectra.par
imred$echelle/refspectra.par
imred$iids/refspectra.par
imred$irs/refspectra.par
imred$specphot/refspectra.par
    Added timewrap parameter and reorganized calling sequences so the
    sortval is set only in refgspec.  (2/2/89, Valdes)

onedspec$reidentify.x
    Stripped the image extension from the reference spectrum.
    (1/31/89, Valdes)

noao$lib/scr/ecidentify.key
    Fixed minor typo "j Go to next order" --> "k Go to next order".
    (1/26/89, Valdes)

onedspec$dcio.x
    An erroneous sfree in dc_gspec was removed. (1/26/89, Valdes)

onedspec$idsm_keywrds.x
onedspec$load_hdr.x
onedspec$dispcor/dispcor.x
onedspec$dispcor/ecdispcor.x
    Changed CRPIX usage to real.  (1/26/89, Valdes)

onedspec$names.par
imred$coude/names.par
imred$iids/names.par
imred$irs/names.par
    Made the "input" parameter prompt indicate it is a list rather than
    a single file.  (1/24/89, Valdes)

onedspec$splot.par
imred$coude/splot.par
imred$echelle/splot.par
imred$iids/splot.par
imred$irs/splot.par
imred$specphot/splot.par
    Made the minimum line number be 1 instead of 0.  (1/24/89, Valdes)

onedspec$splot/splot.x
    The 'w' window option in SPLOT now only redraws automatically in
    "auto" mode.  (1/24/89, Valdes)

onedspec$ecidentify/ecffit/ecffit.x
    The 'o' key now accepts the default order for fitting; i.e. a
    carriage return for the prompt.  Also the message about fitting
    now also includes the order offset being used.  (1/24/89, Valdes)

onedspec$idgdata.x
    Now allow 2D images with a second dimension of 1. (1/24/89, Valdes)

onedspec$dispcor/refinterp.x
    When interpolating on a parameter that is the same for a set of arcs
    and an object one wants two arcs to be identified; i.e. the one before
    and after.  This did not happen until this bug fix.  (1/20/89 Valdes)

onedspec$sensfunc.par
imred$echelle/sensfunc.par
imred$iids/sensfunc.par
imred$irs/sensfunc.par
imred$specphot/sensfunc.par
onedspec$standard.par
imred$echelle/standard.par
imred$iids/standard.par
imred$irs/standard.par
imred$specphot/standard.par
    Fixed missing default value for answer parameter.  (1/20/89, Valdes)

onedspec$splot/pixind.x
    Removed use of AINT function which was misbehaving on Sun386i.
    (12/16/88 Valdes)

onedspec$identify/reidentfy.x
onedspec$identify/idreidentfy.x
onedspec$identify/idreplot.x	+
onedspec$doc/reidentfy.hlp
onedspec$reidentfy.par
twodspec$longslit/reidentfy.par
imred$coude/reidentfy.par
imred$iids/reidentfy.par
imred$irs/reidentfy.par
imred$specplot/reidentfy.par
    Added plotfile for residuals.  (12/16/88 Valdes)

onedspec$dispcor/dcio.x
    If a reference spectrum is an image section its database entry will
    be the file with the section stripped.  Since the database entry
    is written by IDENTIFY I copied the database access code that
    strips the image section.  (12/8/88 Valdes)

onedspec$dispcor/dispcor.x
    The use of some real variables in the flux conservation calculation
    resulted in incorrect results when the resolution was very high.
    The code was carefully rewritten to do all possible calculations in
    double precision. (12/8/88 Valdes)

onedspec$t_specplot.x +
onedspec$specplot.par +
onedspec$specplot.h +
onedspec$doc/specplot.hlp +
noao$lib/scr/specplot.key +
onedspec$x_onedspec.x
onedspec$onedspec.cl
onedspec$onedspec.men
onedspec$onedspec.hd
onedspec$mkpkg
    New task added (12/7/88 Valdes)

onedspec$t_standard.x
    Fixed minor bug: missing parg in eprintf when dispersion solution
    missing.  (11/4/88 & 11/17/88)

onedspec$identify/ididentify.x
onedspec$identify/idfitdata.x
    The nonmonotonic error message was being lost because it is flushed
    immediately to the screen and then the screen is cleared to redraw
    the graph.  This has now been fixed by checking for an error just
    before the cursor read.  (11/2/88)

onedspec$identify/identify.x
onedspec$identify/iddb.x
onedspec$identify.par
onedspec$doc/identify.hlp
    1.  Added the additional icfit parameters (except naverage) to IDENTIFY
	so the user can set the default fitting parameters more fully.
    2.  All the ICFIT fitting parameters are now written to the database and
	read back.  This allows IDENTIFY and REIDENTIFY to start with exactly
	the same fitting parameters as previously used.  (11/2/88)

onedspec$t_bswitch.x
    Added a test for the extinction correction request before trying to compute
    the airmass.  (11/1/88)

onedspec$ecidentify/eccolon.x
    1.	When the label parameter was initially set to user all the labels
    were being printed not just those for the current aperture. The bug has
    been fixed. (9/9/88)

onedspec$dispcor/dispcor.x
    1.	A bug was fixed in the log+ option of dispcor and ecdispcor. The
	problem was that the end points of the wavelength region were in
	linear wavelength units but the w1 and dw parameters were in log units,
	causing an erroneous computation of the index for the first pixel.
	This bug has been fixed.  (9/9/88)

onedspec$dispcor/refspectra.x
onedspec$onedspec.cl
onedspec$onedspec.men
onedspec$batchred.cl +
onedspec$batchred.par +
onedspec$bswitch.par +
onedspec$coefs.par -
onedspec$standard.par
onedspec$sensfunc.par
    1.  BATCHRED and BSWITCH were put back into this package.
    2.  COEFS was removed from this package.
    3.  Enumerated strings were added to SENSFUNC and STANDARD parameter
	files to prevent the tasks from dying on a bad value (i.e. clgwrd
	was causing an error).  By putting the allowed values in the parameter
	file the CL will wait for an allowed value.
    4.  REFSPECTRA does not change the value of the confirm parameter now.
	(7/29/88 Valdes)


onedspec$splot/deblend.x
onedspec$doc/splot.hlp
    1.  The fitting parameter initialization was being done even before the
	'q'.  Thus, the '-' subtraction did not use the fit but the initial
	parameters.
    2.  Modified the initial sigma to be 1/4 of the range divided by the number
	of lines.  The 1/2 was too large.  (7/26/88 Valdes)

onedspec$splot.par
onedspec$splot/deblend.x
onedspec$splot/scr_help.x -
onedspec$doc/splot.hlp
    1.  Removed unused parameters inblend, fixsep, difference, subtract from
	parameter file.
    2.  Fixed bug with '-' in deblending (continuum was not being subtracted).
    3.  Removed unused source file.
    4.  Update the help page.  (7/19/88 Valdes)

onedspec$splot/deblend.x
    Fixed bug introduced below.  (7/12/88 Valdes)

onedspec$splot/deblend.x
onedspec$onedspec.hd
noao$lib/scr/deblend.key
onedspec$doc/splot.hlp
    1.  After moving the parameter initialization to within the options loop the
        initializations were being done wrong.
    2.  The 'd' option was not doing what it was supposed to.
    3.  Added a print newline to clear the status line if four lines were
	entered since this does not go through the 'q' case which was
	doing the clear.
    4.  The n sigma cases had the wrong mneumonics in the help.
    5.  The src definitions in the help table were pointing to wrong files
	since the names and directories for the files have been changed
	(7/1/88 Valdes)


onedspec$t_names.x
onedspec$mkpkg
    Modified this task to use the ODR package.  This also strips the image
    extension allowing the append option to work.  (6/28/88 Valdes)

onedspec$coincor.x
    When doing both coincidence and power law corrections failed to put the
    output of the coicidence correction as the input to the power law
    correction.	(6/23/88 Valdes)

onedspec$identify/idgdata.x
    Added an error check to IMMAP.  Failure to do this gave a segmentation
    violation on the SUNS.	(6/23/88 Valdes)

onedspec$continuum.cl
    1. Added a parameter to allow a cursor list text file to be passed to the
    normcontinuum task.

onedspec$ecidentify/ecgdata.x
onedspec$ecidentify/ecffit/ecfcolon.x
onedspec$ecidentify/ecffit/ecfset.x
onedspec$ecidentify/ecffit/ecfsolve.x
onedspec$ecidentify/ecffit/ecfrms.x +
onedspec$ecidentify/ecffit/mkpkg
noao$lib/scr/ecidentify.key
noao$lib/scr/ecffit.key +
    The following was fixed.				(5/20/88 Valdes)
    1.	Error in graph title string.
    2.	Missing cursor key help.
    3.	Error in ":function" command in fitting mode.
    4.	Rms calculated with deleted points.

onedspec$dispcor/dispcor.x
onedspec$dispcor/ecdispcor.x
    1.	Failed to initialize the output spectrum to zero so that points
	outsided the input data range are zero.  (5/17/88 Valdes)

onedspec$dispcor/refaverage.x
    1.  Instead of checking the reference spectra for aperture and reference
	flag it was test the input image.  This was changed. (5/17/88 Valdes)

onedspec$load_hdr.x
onedspec$splot/deblend.x
    1. The deblending was fitting a function without the factor of 2 in
       the Gaussian sigma definition.  This caused the printed Gaussian
       parameters to be off by a factor of sqrt(2).
    2. Slight change to not have the header loading change the specified
       input line.  It is up to the calling code to determine if this is
       a valid line.  (5/17/88 Valdes)

onedspec$identify/idreidentify.x
    1. Added check for nonmonotonic dispersion solution.  (4/30/88)

onedspec$onedspec.cl
onedspec$onedspec.men
onedspec$onedspec.hd
    1. Task EXTINCT was removed.  The script and help page remain in case
    they are desired.  Later they will also disappear.  The function of
    this script is replaced by CALIBRATE.  (4/26/88 Valdes)
    2. Task BATCHRED was removed to the IMRED packages.  (4/27/88 Valdes)

onedspec$splot/splot.x
onedspec$splot/deblend.x
onedspec$t_flatfit.x
onedspec$identify/ididentify.x
onedspec$ecidentify/ecidentify.x
onedspec$ecidentify/ecffit/ecffit.x
noao$lib/scr/splot.key
noao$lib/scr/identify.key
noao$lib/scr/ecidentify.key
noao$lib/scr/deblend.key
noao$lib/scr/ecffit.key
noao$lib/scr/flatfit.key
    Added 'I' interrupt key. (4/20/88 Valdes)

onedspec$identify/identify.h
    Variables defined as integers instead of real (ID_MATCH, ID_MINSEP)
    (4/18/88 Valdes)

onedspec$sensfunc/t_sensfunc.x
onedspec$sensfunc/sfsensfunc.x
onedspec$sensfunc/sfstds.x
onedspec$sensfunc/sfginit.x
onedspec$sensfunc/sfoutput.x
onedspec$sensfunc.par
onedspec$doc/sensfunc.hlp
noao$lib/scr/sensfunc.key
    1. Added beam number to output sensitivity image header.
    2. Added 'I' interrupt key.
    3. Added aperture number selection.
    4. Added interactive query.  (4/15/88 Valdes)

onedspec$splot/getimage.x
    Modified to recognize echelle format spectra on input.  (4/8/88 Valdes)

onedspec$load_hdr.x
    Modified to recognize echelle format spectra on input.  (4/8/88 Valdes)

onedspec$mkpkg
onedspec$splot/mkpkg
onedspec$identify/mkpkg
onedspec$fortran/mkpkg
onedspec$onedutil.cl
onedspec$onedspec.cl
onedspec$onedspec.par
onedspec$onedspec.men
onedspec$onedspec.hd
onedspec$identify/*
onedspec$t_flatdiv.x
onedspec$t_coefs.x
onedspec$t_combine.x
onedspec$dispcor.par
onedspec$identify/identify.par --> onedspec$identify.par
onedspec$identify/reidentify.par --> onedspec$reidentify.par
onedspec$doc/dispcor.hlp

onedspec$dispcor/* +
onedspec$ecidentify/* +
onedspec$x_onedspec.x +
onedspec$refspectra.par +
onedspec$dispcor1.par +
onedspec$ecidentify.par +
onedspec$ecreidentify.par +
onedspec$doc/refspectra.hlp +

onedspec$x_wavecal.x -
onedspec$x_fluxcal.x -
onedspec$x_onedutil.x -
onedspec$identify/x_identify.x -
onedspec$identify/libpkg.a -
onedspec$dbx/ -
onedspec$dbxio.h -
onedspec$userstd/ -
onedspec$t_dispcor.x -
onedspec$fudge.x -
onedspec$rlsq.x -
onedspec$userstdc.x -
onedspec$readstd.x -
onedspec$qsortra.x -
onedspec$statfile.x -
onedspec$ascrcomp.x -
onedspec$identify/icghelp.x -
onedspec$splot/spflip.x -
    The ONEDSPEC package has been completely reorganized by combining
    executables, eliminating obsolete procedures, and adding new
    versions of IDENTIFY and DISPCOR as well and new tasks for echelle
    format data.  (4/7/88 Valdes)

-------------------------------------------------------------------------------

onedspec$mkpkg
onedspec$splot/deblend.x
    Fixed bugs related to initial guesses for width and peak and scaling.
    Replaced Gauss-Jordan routine by Householder transformation routine
    for stability.  (4/6/88 Valdes)

onedspec$load_hdr.x
    The test for wavelengths in meters per second was W0 < 0.001.
    Now the test is abs(W0) < 0.001.  (3/10/88 Valdes)

onedspec$identify/ididentify.x
    The 't' was calling fit_to_pix with the real valued cursor position
    while the procedure expects a double.  Added a double coercion to fix
    the bug.  (2/18/88 Valdes)

onedspec$splot/anssave.x
onedspec$splot/mktitle.x
onedspec$splot/getimage.x
onedspec$splot/splot.x
onedspec$splot/splotfun.x
    1.  Titles (on the graph and in the log file) for two dimensional images
	now contain the line number given as an image section.
    2.  The log file title now includes a time stamp. (1/29/88 Valdes)

onedspec$identify/ididentify.x
    When recentering all the features the fitted coordinates are now
    updated and the tick marks moved to the new center position.
    (1/4/87 Valdes)

onedspec$identify/iddb.x
    DBGETR was declared as real for the new shift parameter causing a wrong
    wavelength scale to appear. (12/22/87 Valdes)

onedspec$doc/identify.hlp
    Fixed minor typo. (12/7/87 Valdes)

onedspec$sextract.cl +
onedspec$doc/sextract.cl +
onedspec$onedutil.cl
onedspec$onedutil.par
onedspec$onedutil.men
onedspec$onedutil.hd
    Added a new task, SEXTRACT, to extract subspectra. (11/19/87)

onedspec$t_dispcor.x
    The default starting wavelength and wavelength interval are now printed
    in g format so that the user sees the full value.  (11/9/87)

onedspec$identify/identify.x
onedspec$identify/reidentify.x
onedspec$identify/idgraph.x
    1.  The XTOOLS change to XT_MK1D now permits the sections "column 51"
	and "column 051" to be recognized identically.
    2.  REIDENTIFY now aborts with a useful error message if their is not
	database record for the reference image instead of later causing
	a segmentation error.
    3.  IDENTIFY can now plot in point mode using the GTOOLS commands if
	desired.
    (11/9/97 Valdes)

noao$onedspec$sensfunc/sfextinct.x
noao$onedspec$sensfunc/sfsensfunc.x
noao$onedspec$sensfunc/sfreset.x
noao$onedspec$sensfunc/sfmarks.x
noao$onedspec$sensfunc/sfadd.x
noao$onedspec$sensfunc/sfdelete.x
noao$onedspec$sensfunc/sfundelete.x
noao$onedspec$sensfunc/sfmove.x
noao$onedspec$sensfunc/sfgraph.x
noao$onedspec$sensfunc/sfginit.x
noao$onedspec$sensfunc/sfcomposite.x
noao$onedspec$sensfunc/sfcolon.x
noao$onedspec$sensfunc/sfshift.x
noao$onedspec$sensfunc/sensfunc.h
noao$onedspec$doc/sensfunc.hlp
noao$lib/scr/sensfunc.key
    A number of changes were made based on user comments.
    1.  A bug was fixed which caused the ":order" command to crash the task.
	The integer valued order was being passed as a char in the colon
	decoding task.
    2.  The shift key 's' now toggles allowing a shift to be undone
	without initializing all the data.  Also a message is printed
	to indicate what has been done.
    3.  The composite key 'c' now toggles allowing a composite to be undone
	without initializing all the data.  Also a message is printed
	to indicate what has been done.  A deleted composite point deletes
	the original data at that wavelength when toggling back.
    4.  The extinction key 'e' now toggles allowing an extinction
	correction to be undone without initializing all the data.
	Also a message is printed to indicate what has been done.
    5.  A different symbol may be used to indicated added points.
    6.  Changing the function or order does not automatically do a
	new fit.
    7.  A new key 'g' was added to do a fit and redraw the graph(s).
	The existing 'f' key does a fit and overplots as before.
    (11/6/87 Valdes)

onedspec$splot/replot.x
onedspec$splot/splot.x
onedspec$splot/autoexp.x
    Modified REPLOT to use GTOOLS task GTVPLOT.  This allows the user to
    select point mode.  The calling sequence for REPLOT has a new argument
    to allow calling this procedure for overplotting.  (11/5/87 Valdes)

onedspec$identify/*
onedspec$identify/iddoshift.x +
    Added shift options to IDENTIFY and a refit option to REIDENTIFY.
    This allows maintaining the same coordinate function with an additive
    shift. (11/3/87 Valdes)

onedspec$sensfunc/sfgraphs.x -
onedspec$sensfunc/mkpkg.x
    A zero length file, possibly confused with sfgraph.x was deleted and
    deleted from the mkpkg. (10/26/87 Valdes)

onedspec$splot/deblend.x
onedspec$splot/sumflux.x
    1. The input data to the deblending routine are now scaled to values
    near unity.  Also the fitting is iterated three times to make the
    results more consistent.
    2. When computing the line center with 'e' the data is scaled to
    avoid underflows in summing residuals to the 1.5 power.
    (See bug report 16) (10/22/87 Valdes)

onedspec$sensfunc/sfsensfunc.x
onedspec$sensfunc/sfextinct.x
    1. Aperture number for new aperture in title was undefined in the first
    graph.  Set title after determining aperture number.
    2. In a rare case it was possible for a square root of zero to occur
    in the extinction significance calculation which is fatal on VMS.
    Added check of argument before square root call. (Valdes)

onedspec$splot.par
    Changed all interactive query parameters from auto mode to query
    mode to force a query even when run in menu mode and with :go.
    (9/15/87 Valdes)

onedspec$t_standard.x
onedspec$t_lcalib.x
onedspec$splot/plotstd.x
onedspec$standard.par
onedspec$lcalib.par
onedspec$splot.par
onedspec$doc/standard.hlp
onedspec$doc/lcalib.hlp
onedspec$doc/splot.hlp
    The magnitude to absolute flux conversion constant has been made a
    user changable parameter in the three tasks dealing with the flux
    calibration tables.  (9/3/87 Valdes)

onedspec$t_sensfunc.x -
onedspec$sensfunc/* +
noao$lib/scr/sensfunc.key +
onedspec$sensfunc.par
onedspec$doc/sensfunc.hlp
onedspec$t_standard.x
onedspec$doc/standard.hlp
onedspec$bswitch.par
onedspec$getextn.x
    SENSFUNC has been completely rewritten.  It now allows determination
    of extinction, display of flux calibrated spectra, and many nice
    features for displaying and manipulating the data.  For full details
    read the new help page.

    The new sensfunc required some modifications to STANDARD in the
    format of the output file produced by standard.  The parameters for
    BSWITCH no longer have the grey scale parameter add_const or the
    (never implemented) revised extinction file rev_ext_file which are
    not produced by SENSFUNC any more.

    The extinction loading procedure was modified to allow a null
    extinction file to correspond to no extinction and to eliminate the
    procedure get_new_ext and fix_ext which were used for the old grey
    constant and never implemented revised extinction file. (9/3/87
    Valdes)

onedspec$splot/mkpkg
onedspec$splot/splot.x
onedspec$splot/splotfun.x
    Errors getting a spectrum in function mode were ignored and the spectrum
    was replotted.  Changed to return the error as a warning and not redraw
    the plot.

onedspec$t_dispcor.x (routine reinterp)
    The reinterpolation now has additional tests:
    1)  When the interpolation point is within a minimum distance of
	an input pixel (0.001) it does not interpolate.  This was
	done because the interpolation grid is sometimes meant to be
	identical with the input but the computation of the output grid
	is very slightly off (this was observed in COMBINE).
    2)	If one of the points to be interpolated between has a value of
	0.0 (used to mark missing data in ONEDSPEC) then the rebinned
	point is set to 0.0 in order to propagate the missing point.
	This is important for combining spectra with COMBINE. (8/5/87 Valdes)

====
V2.5
====

onedspec$t_sinterp.x
    Valdes, June 22, 1987
    1.  Removed a warning message to allow comments in the input table.

onedspec$splot/avgsnr.x
    Valdes, June 19, 1987
    1.  A possible type of data is Fnu calibrated data with values in the
	range 1e-25.  Attempting to determine an average, rms, and
	signal-to-noise ratio with SPLOT caused a divide by zero error
	due to underflowing the sum of squares.  This has been modified
	to shift and scale the data before computing the sum of squares.

onedspec$t_standard.x
    Valdes, June 12, 1987
    1.  There was an uninitialized memory problem with the space allocated
	for adding points.  This bug was introduced with the May 15th
	modifications to the structure of the calibration files.

onedspec$load_hdr.x
onedspec$idsm_keywrds.x
onedspec$t_calibrate.x
    Valdes, June 9, 1987
    1.  Added EXPTIME as a recognized exposure time keyword.
    2.  Added check against INDEF or 0 exposure time in CALIBRATE.

onedspec$bplot.cl
    Valdes, June 4, 1987
    1.  The BPLOT script is now back the way it was earlier because the
	earlier bug with the CL and list files seems to have gone away
	while the new script relies on writing to parameter files which
	doesn't work in the background.

onedspec$onedspec.cl
onedspec$onedspec.hd
onedspec$onedspec.men
onedspec$powercor.cl +
onedspec$powercor.par +
onedspec$getcalib.x
onedspec$doc/powercor.hlp +
    Valdes, June 1, 1987
    1.  Added task POWERCOR from IIDS.
    2.  Added an error check for a bad extinction file.

onedspec$splot/deblend.x
    Valdes, May 19, 1987
    1.  A bug that was introduced into deblending during the last set of
	changes was fixed.

onedspec$onedutil.par
onedspec$lcalib.par
onedspec$t_lcalib.x
    Valdes, May 19, 1987
    1.  Make the default for the calibration parameters in LCALIB to
	be package parameters of the same name in keeping with the way these
	parameters are used in the other ONEDSPEC tasks.
    2.  Added the calibration parameters to the ONEDUTIL package and
	the default is to refer to the parameters of the package that loaded
	it.  This will be either ONEDSPEC or one of the IMRED packages.
    3.  Modified LCALIB to not require the extinction file when reading
	star calibration info.

onedspec$mkpkg
onedspec$bswitch.par
onedspec$lcalib.par
onedspec$onedspec.par
onedspec$splot.par
onedspec$standard.par
onedspec$t_lcalib.x
onedspec$t_standard.x
onedspec$x_fluxcal.x
onedspec$x_onedutil.x
onedspec$getcalib.x
onedspec$getextn.x
onedspec$plotstd.x -
onedspec$splot/mkpkg
onedspec$splot/plotstd.x +
onedspec$doc/standard.hlp
onedspec$doc/lcalib.hlp
onedspec$doc/onedspec.hlp
onedspec$doc/splot.hlp
onedspec$doc/bswitch.hlp
noao$imred/echelle (par files)
noao$imred/iids (par files)
noao$imred/irs (par files)
noao$imred/specphot (par files)
noao$lib/onedstds (data files)
    Valdes, May 15, 1987
    1.  The major change was to change the format of the calibration data
	from the very constrained old format to a more flexible format.
	This also involved adding a new parameter "extinction" and changing
	"calib_file" to "caldir".
    2.  The calibration data files were converted to the new format in a
	number of subdirectories.
    3.  The parameter files in the IMRED directories were also updated.
    4.  Moved plotstd.x to splot directory.  It is an splot routine and should
	be with the other splot source.
    5.  Moved LCALIB from the FLUXCAL executable to the ONEDUTIL executable.

onedspec$splot/usercoord.x
    Valdes, May 8, 1987
    1.  When setting a wavelength scale using the 'u' key on data lacking
	any wavelength information (W0 and WPC == INDEF) there was a bug
	causing a message of the form "cursor not moved".

onedspec$splot/deblend.x
onedspec$splot/splot.x
onedspec$splot/eqwidthcp.x
    Valdes, April 30, 1987
    1.  I missed a couple of places where READ_WRITE access was used
	in SPLOT (see March 13, 1987).  These have been removed.
    2.  There was a bug in the 'k' and 'v' type equivalent width
	procedures which produced wrong results unless the cursor was
	very near the center.
    3.  When applying deblending to a single line the starting position
	is now the minimum or maximum point of the continuum subtracted
	profile rather than the center of the continuum limits.

onedspec$splot/deblend.x
onedspec$splot/splot.x
onedspec$splot/anssave.x
onedspec$splot/eqwidthcp.x
onedspec$splot/eqwidth.x
onedspec$doc/splot.hlp
noao$lib/scr/splot.key
    Valdes, April 28, 1987
    1.  SPLOT now prints only one line of output on the graphics status line
	when doing deblending or equivalent width measurments.  The full
	output is saved in the log file and also internally.  These changes
	were made to allow reasonable behavior in terminals which cannot
	display text and graphics simultaneously (PC emulators, VT240's).
    2.  To get the full output of previous measurements during the course of
	the task execution a new command ":show" has been added.
    3.  It was possible for deblending to yeild negative sigmas.  This has been
	fixed as well.

onedspec$doc/names.hlp
    Valdes, April 27, 1987
    1.  A bug note was added to the task help stating that the append option
	is intended only for image sections.  Appending any other string
	produces names not acceptable to ONEDSPEC.

onedspec$identify/identify.x
onedspec$identify/ididentify.x
onedspec$identify/idlinelist.x
onedspec$identify/idnewfeature.x
    Valdes, April 15, 1987
    1.  Added bell if feature not found with 'm'.
    2.  When automatically identifying lines, 'l' it now requires a new line
	to be within the matching distance relative to the current fit and
	if two centers are withing "minsep" then the closest match to the
	user coordinate is selected.
    3.  Default initial graph for fitting is residuals vs. wavelength.

onedspec$t_standard.x
    Davis, April 13, 1987
    1. At Frank's suggestion I added a test in STANDARD to make sure that
    the exposure time is never less than 1 second.

onedspec$t_standard.x
    Davis, April 10, 1987
    1. In order to check for an INDEF valued exposure time STANDARD on VMS/IRAF
    was testing a boolean compared to a fp 0.0. The test was always coming up
    true if the exposure keyword was defined; and exposure time was being set
    to 1. If no exposure keyword was present INDEFI was being used for the
    exposure time. I changed the test to test for an integer INDEF and
    every thing seemed ok. Lyra, IRAF and IRAFX were updated.

onedspec$t_standard.x
    Valdes, April 3, 1987
    1.  STANDARD was using INDEF if there was no exposure time in the
	header rather than the intended 1.0 as described in the
	documentation.  It now uses 1 for the exposure time if there
	is no exposure time in the header.

onedspec$coincor.x
    Valdes, March 23, 1987
    1.  In the power correction the value of the output when the input
	was negative was undefined.  Now it is the input value.

onedspec$splot/getimage.x
onedspec$splot/wrspect.x
onedspec$splot/deblend.x
onedspec$splot/eqwidth.x
onedspec$splot/eqwidthcp.x
    Valdes, March 13, 1987
    1.  SPLOT no longer opens the image READ_WRITE.  This was unnecessary
	and would prevent someone from examining data for which they don't
	have write permission.
    2.  Modified the deblend and eqivalent width options to deactivate the
	workstation since they produce multiline output.

onedspec$t_dispcor.x
onedspec$dispcor.par
onedspec$doc/dispcor.par
    Valdes, March 5, 1987
    1.  It is now a fatal error if the dispersion solution (from IDENTIFY)
	is nonmonotonic.
    2.  The starting wavelength and wavelength intervals are now list
	structured parameters to allow files containing the values to
	be used.  With no file the user is queried and a carriage
	return or nonnumeric value will use the default value.
    3.  The way wavelength information is printed out has been improved.
    4.  A missing carriage return was added to the error message when
	an image is not found.
    5.  The order of the parameters, some default values, some of the
	prompts, and their modes have been changed to be more consistent
	with other tasks and more easily useable with command line arguments.
    6.  The help page was modified to reflect these changes.

onedspec$identify/ididentify.x
onedspec$identify/idreidentify.x
onedspec$identify/idfitdata.x
onedspec$identify/idcolon.x
    Valdes, March 5, 1987
    1.  IDENTIFY now prints a warning about a nonmonotonic coordinate
	solution.
    2.  Changes were made to not print the current feature when error
	messages are printed thus giving the user a change to read them.
    3.  When attempting to change images to a nonexistant image
	the immap was improperly error checked.  This could result in
	fatal errors (particularly on VMS).

onedspec$dispcor.par
    Valdes, February 27, 1987
    1.  Prompt was changed from
	"File containing ..." to "Database containing ..."

onedspec$userstd/nearpt.x
onedspec$oned.h
    Valdes, February 25, 1987
    1.  Changed nearest point algorithm to use NDC coordinates. This required
	adding the GIO pointer to the arguments.
    2.  Change all procedures calling near_pt to include GIO pointer
	argument.
    3.	Changed maximum distance to 0.05 (NDC)

onedspec$splot/splot.x
    Valdes, February 25, 1987
    1.  When exiting from the 'f' function mode in SPLOT the function
	status line is now erased.

noao$onedspec
    Valdes, February 19, 1987
    1.  Made required GIO modifications.  The tasks affected are SPLOT,
	STANDARD, FLATFIT, SENSFUNC, and IDENTIFY.  Please report any
	bugs.

onedspec$coincor.x
onedspec$t_coincor.x
onedspec$t_flatdiv.x
onedspec$t_flatfit.x
onedspec$doc/coincor.hlp
    Valdes, February 9, 1987
    1.  A number of interface errors were fixed.
    2.  The coincidence correction procedure now takes an input and output
	array.  Previously it modified the given array.
    3.  The basic IIDS correction is now checked for values which would
	cause the log function to give an exception or instruction error.
    4.  The major change in COINCOR is that if the output root image name
	is null then the operation is done in place.  When dealing with
	~1000 images this saves on disk space and directory manipulations.
    5.  The help page for COINCOR was appropriately updated.

onedspec$fortran/polft1.f
onedspec$getextn.x
onedspec$t_calibrate.x
onedspec$t_sensfunc.x
    Valdes, February 5, 1987
    1.  The following errors reported by Skip Schaller (Steward Obs, AOS port)
	were fixed.
	polft1.f:	Minus sign out of place in expression
	getextn.x:	Remove declaration for max(), min(), log10()
	t_calibrate.x:	Remove declaration for min()
	t_sensfunc.x:	Remove declaration for log10()

onedspec$oned.h
    Valdes, January 30, 1987
    1.  The maximum number of beams the package can handle has been
	increased from 50 to 100.

onedspec$t_combine.x
onedspec$combine.par
onedspec$doc/combine.hlp
    Valdes, January 30, 1987
    1.  An new parameter called "combine" was added which specifies the type
	of combining (either average or sum).  The help documentation was
	updated.

onedspec$identify/idcolon.x
onedspec$identify/ididentify.x
    Valdes, January 16, 1987
    1.  Colon command dictionary and switch rewritten to use macro definitions.
    2.  ? help facility rewritten to use system paging facility instead of ad
	hoc menu facility.

onedspec$gcurval
    Valdes, January 12, 1987
    1.  Changed "0 0 0 q" to "0 0 1 q" since this was detected as an error
	in V2.5.  This file is used by BPLOT.

onedspec$batchred.cl
noao$imred/iids/batchred.cl
noao$imred/irs/batchred.cl
    Valdes, December 29, 1986
    1.  This script creates the user script "process.cl".  It was creating
	it with an out-of-date syntax which no longer worked.  Modified
	BATCHRED to create a valid script.

onedspec$lcalib.par
    Valdes, December 18, 1986
    1.  The default for the calibration file in task LCALIB is now that
	for the task STANDARD.

onedspec$identify/idreidentify.x
    Valdes, December 3, 1986
    1.  REIDENTIFY was not correctly tracking when there was no fit.
	75: FIT(j) = FIT(i)	==>	FIT(j) = fit

onedspec$t_flatfit.x
onedspec$t_flatdiv.x
onedspec$flatfit.par
onedspec$flatdiv.par
onedspec$doc/flatfit.hlp
onedspec$doc/flatdiv.hlp
    Valdes, December 2, 1986
    1.  The tasks FLATFIT and FLATDIV may optionally apply coincidence
	corrections.  They were not updated to include the IIDS nonlinear
	correction made earlier.  They have now been updated.

onedspec$t_bswitch.x
onedspec$t_flatfit.x
onedspec$t_sums.x
    Valdes, December 1, 1986
    1.  The tasks BSWITCH, FLATFIT, and SUMS created new images with only
	the standard ONEDSPEC header information and without any other
	user parameters.  These tasks worked this way because they may
	sum many spectra for each beam and the connection between the
	input image header and output image header was not obvious.  They
	have been modified to use the last input image for each beam as
	the image header template for the output image of that beam.
	When there is no summing then the output image header will be
	a copy of the input image header with updated ONEDSPEC parameters.

onedspec$identify/idlinelist.x
    Valdes, November 25, 1986
    1.  It used to be that if there were no coordinate list then the
	default user coordinate was the pixel coordinate.  This changed
	at some point.  This has been fixed.

onedspec$identify/identify.x
    Valdes, November 21, 1986
    1.  The common variable labels is now initialized every time the
	task runs.

onedspec$load_hdr.x
onedspec$splot/splot.x
onedspec$splot/usercoord.x
    Valdes, November 17, 1986
    1.  Since people insist on using W0 and WPC to define the wavelength
	coordinates and are then confused because CRVAL1 and CDELT1 are
	used I changed the default precedence.  The ONEDSPEC package now
	looks for W0 and WPC first and then resorts to the FITS coordinate
	keywords.  Also if the coordinate values are less the 0.001
	it assumes that the units are meters and converts to Angstroms.
	This arises when a strict interpretation of the FITS coordinates
	(units of meters) is used for optical spectral data.
    2.  The key 'p' in SPLOT has been modified to query for the starting
	and ending wavelength.  The default values are those last defined.
	Thus, this key may be used at any time to set the wavelength scale.
	To return to wavelength scale after '$' the user simply types
	carriage return to accept the defaults.
    3.  The key 'u' in SPLOT has been modified to work in all cases.
	Previously it only worked if the plot was in pixel coordinates.
	If run in wavelength coordinates funny results would be obtained.
	Now the user may mark two points even in wavelength coordinates.

onedspec$coincor.x
    Valdes, November 13, 1986
    1.  The power law correction is applied only to positive data.
	Negative data is not changed.

onedspec$splot/eqwidth.x
onedspec$splot/deblend.x
onedspec$splot/eqwidthcp.x
    Valdes, November 3, 1986
    1.  Changed print format statements to keep columns from running together
	for flux calibrated data.

onedspec$splot/*.x
onedspec$splot/mkpkg
onedspec$splot/idsmtn.h -
onedspec$splot/oned.h -
    Valdes, October 28, 1986
    1.  Changed include references to point to include files in the main
	package directory ("idsmtn.h" -> "../idsmtn.h" and
	"oned.h" -> "../oned.h").
    2.  Deleted the copies of the include file in this directory.

onedspec$t_coincor.x
onedspec$coincor.x
onedspec$coincor.par
onedspec$doc/coincor.hlp
onedspec$oned.h
onedspec$onedspec.par
onedspec$onedspec.men
    Valdes, October 21, 1986
    1.  Modified COINCOR to include a power law correction as part of the
	IIDS correction.
    2.  A new paramter was added to COINCOR and ONEDSPEC, called "power",
	for the IIDS power law correction.
    3.  The help page for COINCOR was revised.

onedspec$splot/splot.x
onedspec$splot/getimage.x
onedspec$splot/wrspect.x
    Valdes, October 20, 1986
    1.  Added ability to write modified spectrum to the current image in
	SPLOT.
    2.  There were several errors in the code which were fixed.  These
	included modifying an IMIO buffer and extra arguments.

onedspec$splot/splot.x
onedspec$splot/eqwidth.x
onedspec$splot/eqwidthcp.x
onedspec$splot/deblend.x
onedspec$splot/saveans.x
onedspec$doc/splot.hlp
    Valdes, October 15, 1986
    1.  The routines for the keys 'd', 'e', 'h', 'k', and 'v' now print
	information in a same format.  They all have a header line and
	a line containing the values.  There reason for this is that,
	with the additional information now included, it requires two
	lines for "quantity: value" format anyway.  They also print the
	information which is common to all methods in the same order.
    2.  The deblending routine 'd' now includes the continuum, equivalent
	width, and sigma of the Gaussian fits.  It also plots the continuum
	slope as is done with the 'e' key.
    3.  The equivalent width routine 'e' now includes the continuum.
    4.  The 'h', 'k', and 'v' routines now include flux and FWHM.
    5.  The 'h', 'k', and 'v' routines now work on emission lines as well
	as absorption lines.
    6.  The 'h', 'k', and 'v' routines define the gaussian profile in the
	same way as the deblend routine; i.e. exp (-0.5 * (dw/sigma)**2)
    7.  Help revised.

onedspec$splot/splot.x
onedspec$splot/autoexp.x
    Valdes, October 14, 1986
    1.	The SPLOT windowing keys 'a', 'z', ',', and '.' were not compatible
	with the GTOOLS windowing.  AUTOEXP.X was rewritten to use the
	GTOOLS structure while operating as before.

onedspec$splot/splot.x
onedspec$splot/eqwidthcp.x
onedspec$splot/scrhelp.x
onedspec$splot/stshelp.x
onedspec$doc/splot.hlp
    Valdes, October 8, 1986
    1.  There are two methods of measuring equivalent widths using a simple
	Gaussian line model.  The original method which requires a unit
	continuum has been restored as the 'k' key. (See the revision
	of September 18, 1986).
    2.  The second method recently added which uses the y cursor to mark
	the continuum and uses the half flux level for determining the
	line width is available with the last available key; the 'v' key.
    3.  The 'h' key for one sided measurements still requires a second key
	but now in addition to defining which side of the line to use
	it also defines which method to used.
    4.  The help page has been updated to reflect the changes.

onedspec$doc/rebin.hlp
    Valdes, October 7, 1986
    1.  Typo in V2.3 documentation fixed: "set to know" -> "set to no".

onedspec$t_shedit.x +
onedspec$shedit.par +
onedspec$shparams.par +
onedspec$doc/shedit.hlp +
onedspec$onedspec.cl
onedspec$onedspec.men
onedspec$onedspec.hd
    Valdes, September 29, 1986
    1.  A onedspec header editor called SHEDIT has been added.  It uses
	EPARAM as the editor.
    2.  A help page is available.

onedspec$identify/reidentify.x
    Valdes, September 25, 1986
    1.  REIDENTIFY was passing a constant 0. to ID_REIDENTIFY which expects
	a double.  Replaced 0. with "double (0.)" as the argument.
	This caused a failure in the AOS IRAF.

onedspec$splot/eqwidthcp.x
onedspec$splot/doc/splot.hlp
    Valdes, September 18, 1986
    1.  The 'k' key used to determine equivalent widths by fitting a Gaussian
	profile based only on the depth of the core, the line width at some
	point, and the continuum had several problems.  First, people failed
	to realize that the continuum had to be 1.  Second, the y cursor
	position was used for measuring the width of the line.  Third, if
	the y cursor position was not within the line then square root and
	logarithm exceptions occured.  These problems have been fixed as
	follows:
	    1.  The y cursor is now used to mark the continuum.  This
	    has been made very clear in the documentation.
	    2.  This allows equivalent widths to be measured for any
	    absorption line even when the continuum is not 1!
	    3.  The level at which the width of the line is measured is
	    now the point half way between the continuum and the minimum
	    point in the line.  Previously this point was set by the
	    y cursor position.
	    4.  If the y cursor position is below the line minimum or
	    the left and right edges of the line are not found at the half
	    flux point an informative error is printed and the equivalent
	    width is not evaluated.
	    5.  The search for the left and right edges was previously
	    limited to +- 9 pixels.  This limit has been removed.  The
	    search now extends to the limits of the spectrum if necessary.
	    6.  The information printed includes the gaussian parameters
	    as well as the equivalent width.
	    7.  The gaussian model is plotted over the spectrum in order
	    to judge the reasonableness of the equivalent width measurement.

onedspec$splot.par
onedspec$doc/splot.hlp
    Valdes, September 11, 1986
    1.  Added ? to boolean prompts.  The prompt
	    Fix separation of lines:
	was confusing a user who tried to give the value of the separation.
	The new prompt is
	    Fix separation of lines?:
    2.  This parameter was also not in the documentation!

onedspec$t_dispcor.x
    Valdes, September 11, 1986
    1.  DISPCOR requires reference spectra to exist as well as the identify
	database entry.  The error message was misleading.  The error message
	is now more specific.

onedspec$splot/splot.x
onedspec$splot/anssave.x
    Valdes, September 8, 1986
    1.  Modified SPLOT to append to the answer file each time an aswer is
	written rather than opening the answer file at the beginning and
	closing it at the end.  This eliminates the annoying creation of
	a file everytime SPLOT is used.

onedspec$t_dispcor.x
    Valdes, September 8, 1986
    1.  Procedure dcorrect was defined as a function but used as a subroutine.
	This was found and corrected during the Alliant port.

onedspec$identify/xtpage.x +
onedspec$identify/xtmenu.x +
onedspec$identify/ididentify.x
    Valdes, September 5, 1986
    1.  Added paging and menu features to '?' help.

onedspec$bplot.cl
    Valdes, August 26, 1986
    1.  The BPLOT script has been rewritten.  Rather than calling SPLOT
	in a loop, once for each image, a cursor command file is created
	containing cursor commands for all the images and then SPLOT is
	called with a list of images.  This fixes an undiagnosed bug and
	is more efficient.

onedspec$identify/ididentify.x
onedspec$identify/iddofit.x
onedspec$identify/idgdata.x
onedspec$identify/idfitdata.x
    Valdes, August 22, 1986
    1.  ICFIT no longer inherits the window from IDENTIFY.  Entering ICFIT
	will do autoscaling.
    2.  IDENTIFY now uses the image header coordinate information if there
	is no database dispersion solution.  The parameters used are
	CRPIX, CRVAL, and CDELT.  This allows IDENTIFY to be used with
	linearized spectra in the ONEDSPEC related packages.

onedspec$identify/identify.com
onedspec$identify/identify.x
onedspec$identify/idcenter.x
onedspec$identify/idcolon.x
onedspec$identify/idshow.x
onedspec$identify/reidentify.x
onedspec$identify/identify.par
onedspec$identify/reidentify.par
    Valdes, August 18, 1986
    1.  IDENTIFY and REIDENTIFY modified to include a detection threshold
	parameter for feature centering.
    2.  The help pages were updated.

====================================
Version 2.3 Release, August 18, 1986
====================================

onedspec$splot/wrspect.hlp:  Valdes, August 14, 1986
    1.  The test for whether a new image will overwrite an existing image
	used ACCESS which is for nonimage files only.  This caused a problem
	with recognizing the automatic image extensions.  The modification
	uses IMMAP and IFERR to check if the new image would overwrite an
	existing image.

onedspec$doc/setdisp.hlp:  Valdes, August 8, 1986
    1.  The wording defining the meaning of "dispaxis" was changed because
	of user confusion.

onedspec$identify/idmark.x: Valdes, August 8, 1986
    1.  The optional labels have been adjusted to be half size and
	to have a path of up.  Note that on a vt640 the default text
	quality uses hardware generation so this change will not be
	visible unless you reset the text quality to high.
    2.  The size of the ticks and the gaps have changed slightly.

onedspec$t_dispcor.x: Davis, July 28, 1986
    1. DISPCOR was failing with a bus error on class2. It turned out that
        the get_feature1 routine was trying to get the flex_par parameter out
        of the image header after the image had been closed. I moved the
        imunmap call to the end of the routine.

onedspec$t_dispcor.x: Valdes, July 7, 1986
    1.  DISPCOR was opening comparison images when collecting dispersion
	solutions from the database and failing to close them.  In one
	particular large usage 509 images were opened before
	an out of memory failure!

onedspec$splot: Valdes, July 7, 1986
    1.  In SPLOT the 'w' key has been redefined to 'i' (create a new image).
	Key 'w' now windows the graph.
    2.  The help page and menus updated.

onedspec$identify/: Valdes, July 7, 1986
    1.  Redefined the 'r' key to be 't' so that 'r' can be the standard
	redraw key.
    2.  Help page and '?' menu updated.

onedspec$doc/standard.hlp, lcalib.hlp, sinterp.hlp:  Valdes, July 7, 1986
    1.  Help pages updated to reflect name changes in the standard
	calibration files.

onedspec$identify/: Valdes, July 3, 1986
    1.  Modified package to use new ICFIT package.
    2.  Changed coordinate list parameter to onedstds$henear.dat.
    3.  Updated help page for IDENTIFY to refect new default coordlist.

onedspec$identify/identify.x,reidentify.x,idgetim.x:  Valdes, July 1, 1986
    1.  Replaced calls to imtgetim with idgetim.  Idgetim calls
	imtgetim to get next image name but it then removes any
	image extension.  This is necessary to prevent having two
	different names by which an image may be identified in the
	database.

=====================================
STScI Pre-release and SUN 2.3 Release
=====================================
	
ondespec$getnimage.x:  Valdes, June 19, 1986
    1.  Changed BOOLS in common to INTS for safety's sake.

onedspec$(t_sensfunc.x,fudge.x,userstd.x): Valdes, June 19, 1986
    1.  SENSFUNC was not correctly accumulating grey constant corrections
	between different apertures.  This was fixed by rewriting the
	RLSQ procedures (moved into a file of their own, rlsq.x) and
	making appropriate changes in the rest of the code.
    2.  The grey constant was being computed incorrectly.

onedspec$t_flatfit.x: Valdes, June 18, 1986
    1.  FLATFIT aborted when an error is made specifying a nonexistant
	image.  It now prints an error message and goes on to the
	next spectrum.

onedspec$t_coefs.x: Valdes, June 16, 1986
    1.  Task was calling the wrong database package.  This produced
	totally wrong code since one package returns a structure
	pointer and the other returns FIO channel number.
	This error was probably introduced in May.

onedspec$t_standard.x: Valdes, June 12, 1986
    1.  Minor bug in STANDARD introduced when fixing problem with
	wavelengths (May 19).  Title was no longer being written to
	the STD file.

onedspec$t_dispcor.x: Valdes, June 12, 1986
    1.  DISPCOR had a fixed limit of 100 comparison spectra for all
	apertures in the database.  If this limit was exceeded memory
	would be corrupted (i.e. no check for exceeding the end of the
	array).  This has been changed to use dynamic memory allocation
	so that there is no limit on the number of comparison spectra.

onedspec$identify/ididentify.x: Valdes, June 11, 1986
    1.  Windowing key 'w' added.
    2.  Help page updated to reflect the 'w' and 'y' keys.

onedspec$splot.x: Valdes, June 10, 1986
    1.  Now sets dispersion correction flag when the user defines
	a wavelength scale and writes a new image.

onedspec$identify/splot.x: Valdes, June 9, 1986
    1.  Added check on the validity of the imio pointer when attempting
	to unmap the image.  This occured with a next image failed to
	access the specified image.

onedspec$identify/ididentify.x: Valdes, June 9, 1986
    1.  Changed Memr to Memd in 'y' option.

onedspec$identify/reidentify.x: Valdes, June 2, 1986
    1.  Changed from file template to image template.

onedspec$t_sensfunc.x: Valdes, June 2, 1986
    1.  Added check for square root of zero which is a fatal error on VMS.

onedspec$t_standard.x,t_sensfunc.x: Valdes, May 19, 1986
    1.  The output of STANDARD gave the wavelengths of the left edge of the
	first pixel and the right edge of the last pixel instead of the
	centers.  This causes slight errors downstream in SENSFUNC.
	This has been changed to give the actual W0 and WEND.
        I tried to check that all wavelengths were being calculated and
	used correctly.
    2.  SENSFUNC was not correctly using the output of STANDARD.  In some
	cases it assumed the starting and ending wavelengths were at
	the edges of the pixel and in other cases it assumed they were
	at the centers of the pixels.  The errors largely canceled out
	except that the W0 in the header for the SENSITIVITY image was
	wrong but WPC and the number of points was correct.  Again, I tried
	to check that everything is now consistent.
    3.  SENSFUNC was extrapolating observations when forming the composite
	sensitivity curve.  This leads to significant errors when some
	observations do not extend as far as others in wavelength.  This
	was noticed as a large increase in the RMS relative to the original
	RMS based only on the observations.  Now extrapolations are not
	allowed and only observations covering a given range of wavelengths
	are used in forming the composite curve.  Note that interpolations
	are still used if an observation does not contain a point at a
	particular wavelength.
    4.  The help page for SENSFUNC was modified to explain the difference
	between the RMS of the input points and the RMS of the composite
	points.
    5.  INTRP.F had to be modified because it considered a wavelength
	equal to the first wavelength in the table as an extrapolation.

onedspec$bswitch.par: Valdes, May 19, 1986
    1.  The BSWITCH parameter "add_const" has been changed to use the value
	from SENSFUNC of the same name.  The help page was also modified

onedspec$t_sensfunc.x: Valdes, May 16, 1986
    1.  SENSFUNC was not writing a complete header needed by LONGSLIT.
	Now it goes through the standard ONEDSPEC header package to create
	the senstivity images.

onedspec$t_bswitch.x: Valdes, May 14, 1986
    1.  BSWITCH was not reinitializing properly when not using IDSMODE.
	The effect was to give extraneous output.
    2.  All occurances of "== INDEFI" where changed to use the "IS_INDEF"
	macro.

onedspec$t_rebin.x: Valdes, May 14, 1986
    1.  If the image has not been dispersion corrected then an error is
	printed and the next image is processed.

onedspec$bplot.cl: Valdes, May 13, 1986
    1.  BPLOT has been modified to call SPLOT separately for each input
	image.  This has the effect of repeating the cursor file for each
	image.

onedspec$t_coefs.x: Valdes, May 12, 1986
    1.  COEFS was not writing a correct IDENTIFY database entry.

onedspec$t_rebin.x: Valdes, May 10, 1986
    1.  Rebinning into logarithmic intervals was not working.  This has
	been fixed.  A number of logical changes were required.
    2.  Rather than use an interative method for determining the coordinate
	transformation the transformation can be determined explicitly since
	both the input and output coordinates are linear.
    3.  The logarithm flag was previously ignored if a primary spectrum was
	used.  This prevented making the input and primary spectrum
	the same and then specifying either log or linear output.  This
	is a common way to use this task for converting to log intervals.
    4.  The primary spectrum was not being unmapped.

onedutil$bplot.cl: Valdes, May 9, 1986
    1.  BPLOT has been modified to use the new SPLOT.  The script is now
	a simple one line call to splot.
    2.  The input is now a image list instead of a file containing
	image names.  Note that to use a file containing image names
	the syntax is now "@file".
    3.  The cursor input file is now a parameter of the task allowing
	users to define their own set of commands.
    4.  The graphics device parameter is now standardized with other
	graphics tasks.
    5.  A modified help page is available.

onedspec$splot.x: Valdes, May 9, 1986
    1.  SPLOT now accepts a list of input spectra and processes them
	sequentially.  The parameter name has been changed from "image"
	to "images".
    2.  New SPLOT parameters XMIN, XMAX, YMIN, YMAX allow the user to
	set the limits of the initial plot.  These values may be modified
	interactively with :/xwindow and :/ywindow.
    3.  A modified help page is available.

onedspec$identify/reidentify.x: Valdes, May 8, 1986
    1.  Set log output to be flushed with every line written instead of
	being buffered.

onedspec$sflip.x:  Valdes, May 8, 1986
    1.  A new task has been added to the ONEDUTIL package call SFLIP.
	It flips the dispersion direction of spectra while maintaining
	the proper dispersion image header parameters.
    2.  A help page has been added for the task SFLIP.

onedspec$splot:  Valdes, May 7, 1986
    1.  Changed interpretation of W0 in logarithmic binning to be the
	logarithm of the wavelength of the first pixel.

onedspec$t_dispcor.x, t_rebin.x, t_combine.x:  Valdes, May 7, 1986
    1.  Changed meaning of w0 in logarithmic coordinates to be consistent
	with usual linear formula.  That is with a logarithmic wavelength
	interval the zero point is the logarithm of the starting wavelength.
    2.  Assumed increasing wavelengths in both the output spectra
	and the input spectra.  This restriction has been lifted.
    3.  Default output bins are in increasing wavelength with increasing pixel
	coordinate even when the input dispersion relation has the opposite
	sense.
    4.  The logic in REBIN for col_out = 0 was modified appropriately.
    5.  The help page for DISPCOR has been modified to indicate the new
	ability to have arbitrary input and output dispersion directions.

onedspec$userstd:  Valdes, May 6, 1986
    1.  Previously no graph of the errors would be made if the residuals
	were all the same.
    2.  Warning message was removed.
    3.  Boxes now drawn in NDC with standard size and do not depend on the
	range of the data or the size of the graph.

onedspec$userstdc.x: Valdes, May 6, 1986
    1.  Code incorrectly limited highest order for fit to one less than the
	number of points.  The order is now limited to the number of points.
    2.  Previously no graph of the errors would be made if the residuals
	were all the same.
    3.  Warning messages were removed.
    4.  Boxes now drawn in NDC with standard size and do not depend on the
	range of the data or the size of the graph.

onedspec$identify/idlog.x: Valdes, May 1, 1986
    1.  Column headings were adjusted.

onedspec$onedspec.cl:  Valdes, May 1, 1986
    1.  Removed loading of list and plot packages in ONEDSPEC package script.
	These packages are loaded with the NOAO package.

onedspec:  Valdes, April 27, 1986
    1.  Package pathname "noao.onedspec.onedutil" added to help pages for
	ONEDUTIL package tasks.

onedspec:  Valdes, April 7, 1986
    1.  OBSERVATORY task from IMRED package loaded with ONEDSPEC.
    2.  Latitude parameter removed from the ONEDSPEC package parameters.
    3.  DISPCOR, STANDARD, and BSWITCH latitude parameters changed to
	reference OBSERVATORY parameters.
    4.  The help pages for these tasks were revised.

onedspec$t_flatfit.x:  Valdes, April 7, 1986
    1.  Fixed minor bug.

onedspec$t_sinterp.x:  Valdes, April 6, 1986
    1.  Fixed bug in SINTERP.  It was using CURFIT with a pointer argument
	for the weights instead of a real array.  CURFIT is used only if
	the interpolation mode is one of the CURFIT types.  Obviously
	this option was never tested.
    2.  Entry points removed for portability.
    3.  The interpolation wavelengths when generating a curve were strongly
	subject to accumulated roundoff error; x = x + dx.  This was modified
	to use the construct, x = x1 + (i - 1) * dx, which may still have
	a precision limitation but not an accumulated roundoff error.

onedspec:  Valdes, April 5, 1986
    1.  Found very bad error in numerous places.  The arguments to CLGCUR
	were too few and of those that were there one was of the wrong
	datatype!!!  This was not a problem on the VAXes but very
	bad and hard to find on the SUN.
    2.  Fixed SUN bugs in SENSFUNC due to the statement:
	    call amovks (1, Mems[flags], npts)
	Apparently numeric constants are integer sized which causes problems
	on the SUN which has high order bytes first.  Watch out for this
	construct!

onedspec$getnimage:  Valdes, April 4, 1986
    1.  The entry points in this procedure caused tasks to fail on the
	SUN.  USE OF ENTRY POINTS IS HAZARDOUS TO THE HEALTH OF PORTABLE
	PROGRAMS.  I shall have to see if there are any more entry points
	in ONEDSPEC.

onedspec$getairm:  Valdes, April 4, 1986
    1.  Fixed minor bug in determining HA from ST and RA.  ST was still
	assumed to be in seconds which is not the case any more.

onedspec:  Valdes, March 28, 1986
    1.  ADDSETS would fail if an image was missing.  I modified it
	to detect missing files and continue on.

onedspec:  Valdes, March 27, 1986
    1.  The header parameters CRPIXn, CRVALn, CDELTn have been added to
	the image headers.  They replace W0 and WPC though W0 and WPC
	are still recorded in the header (for now).
    2.  A new task, SETDISP, has been added to set the dispersion axis
	(must be 1 for ONEDSPEC), the dispersion type, and the dispersion
	unit.  These are currently only used for labeling in IDENTIFY
	and thus the task is optional for the moment.
    3.  SPLOT modified to label the wavelength axis using CTYPE1 and CUNIT1.

onedspec$splot/deblend.x: Valdes, March 27, 1986
    1.  Moved deblend.x and eqwidthcp.x to splot directory.
    2.  There was a typo(?) in deblend.x of SPLOT which converted
	sigma to FWHM as FWHM = 2.345 * sigma.  This has been corrected
	to FWHM = 2.355 * sigma.
    3.  The help page for SPLOT was updated.

onedspec$identify: Valdes, March 26, 1986
    1.  Fixed bug in IDENTIFY which failed to add new lines with the 'l'
	command when the initial wavelength axis was pixels.

onedspec$identify: Valdes, March 24, 1986
    1.  Fixed minor bug in REIDENTIFY.  It was calling IC_FREE instead
	of IC_FREED (the new double precision version) while the rest
	of the package was in double precision.

onedspec: Valdes, March 21-22, 1986
    1.  Continued changes in the ONEDSPEC header parameters.  All the
	internal ONEDSPEC header parameters are initialized.  Those not
	in the image header are initialized to INDEF if no other default
	makes sense.  Then when a new image is created only the parameters
	which are not INDEF are written to the new image header.  Hopefully
	there isn't a obscure use in the package that assumes the default
	value of a parameter is zero (this was the previous default default).
	A bug of this sort occurred in SPLOT which assumed that W0 and WPC
	are zero if the image has not been dispersion corrected.  This was
	changed.
    2.  SLIST now prints INDEF for the parameters which are indefinite.
    3.  UT and ST are now stored internally as real values like all the other
	time and angle parameters.  Previously the were stored as integer
	seconds.
    4.  UT, ST, RA, DEC, and HA are written to new images as sexigesimal
	strings instead of real values.  This is contrary to the FITS standard
	but this is the way its been done previously.
    5.  Comments for parameters which are updated by ONEDSPEC are deleted
	when a new image is created.  This is because the database interface
	does not allow comments and when entering a new value the comment
	could be partially overwritten resulting in a nonsensical FITS cards.
	Parameters which ONEDSPEC does not use are not touched.

onedspec$fortran/intrp.f: Valdes, March 20, 1986
    1.  Converted entry points into separate procedures.  Entry points,
	while legal FORTRAN, tend to cause problems except in the very
	best compilers.  The change was sparked by the failure of the
	SUN optimizer.  It is not 100% certain that this caused the
	failure but it works now.
	
onedspec: Valdes, March 19, 1986
    1.  All double precision variables have been change to single
	precision.  The double precision is an anachronism.  There were
	numerous type mismatches with calling procedures using double
	precision and the called procedure expecting single precision.
	These problems were only found recently on the SUN workstation
	which has a reversed order to the bytes.  On the VAX this error
	is not caught.
    2.  The header parameters are accessed through the image database
	interface rather than directly.  This cleans things up alot and
	will make the transition to a real database easier.
	It does, however, mean that comments and sexigesimal notation are
	no longer used.
    3.  Most tasks creating an output image now make a copy of the relevant
	input image header.  This allows header parameters which are not
	recognized by ONEDSPEC to be propagated to the new images.

onedspec$t_combine.x: Valdes, March 19, 1986
    1.  Rebinning did not work after fix to DISPCOR (Feb 14) because macro codes
	were wrong.

onedspec$t_rebin.x: Valdes, March 19, 1986
    1.  Did not work after fix to DISPCOR (Feb 14) because macro codes
	were wrong.

onedspec$identify: Valdes, March 14, 1986
    1.  Modified IDENTIFY to store the line list internally instead of
	scanning the line list file every time.

onedspec:  Valdes, March 14, 1986
    1.  Fixed a bug in LOAD_HDR.X which caused a roundoff error in the UT
	and ST values.  This was a problem when creating a new image since
	it inherited slightly different values than the original image.
    2.  A double precision airmass variable was being passed to GET_AIRM which
	expected a single precisions variable.  This bug became apparent
	on the SUN workstation.  Modified GET_AIRM to expect a double
	precision airmass variable.

onedspec:  Valdes, March 13, 1986
    1.  Modified IDENTIFY and REIDENTIFY to be double precision.  It uses
	the double precision ICFIT and CURFIT procedures.
    2.  The help pages for IDENTIFY and REIDENTIFY were updated for the
	changes since Release 2.2
    3.  Fixed bug in SLIST which printed W0, WPC, and AIRMASS incorrectly
	on the SUN workstation.  Pargr was used instead of pargd.  Also fixed
	possible problem with assigning INDEFR to a double variable.

onedspec:  Valdes, March 11, 1986
    1.  SENSFUNC was not putting the dispersion correction flag, DC-FLAG,
	in the header for the sensitivity image.  This causes LONGSLIT.FLUXCAL
	to fail.  This has been fixed.

onedspec:  Valdes, March 6, 1986
    1.  Added parameter to SPLOT to allow selection of the graphics output
	device.
    2.  Help page for SPLOT modified.
    3.  New parameter file for SPLOT.  Also installed in IMRED packages.

onedspec:  Valdes, Feb 27, 1986
    1.  IDENTIFY and REIDENTIFY have been modified to do shifts in user
	coordinates instead of pixel coordinates.  This applies to the 's'
	and 'x' keys in IDENTIFY and to REIDENTIFY.  The shift specified in
	REIDENTIFY is now in user coordinates.  Unless otherwise specified
	the shifts printed by these tasks are in user coordinates instead
	of pixels.
    2.  A new key has been added to IDENTIFY.  The key 'r' resets the
	current feature to the position of the cursor.  This replaces the
	need to mark the new position and then delete the old position.
    3.  The output of 's' and 'x' in IDENTIFY is slightly different.
===========
Release 2.2
===========
From Valdes Feb 28, 1986:

1.  Fixed bug in FLATDIV which printed the image title as garbage.  Also
the output record number is increment for each input spectrum regardless
of whether the input spectrum is found, has already been flatted, or
is flattened.
------
From Valdes Feb 24, 1986:

1.  Removed junk file identify/isdir.x.
------
From Valdes Feb 14, 1986:

1.  t_sensfunc.x, userstd.x, and fudge.x have been modified to allow
the grey scale correction to be determined interactively even when
points are deleted.

2.  Fixed bug in DISPCOR to allow interpolation between solutions.  This
did not work before.
------
From Valdes Feb 10, 1986:

1.  FLATDIV has been modified to do in-place flattening when the input
and output spectra are the same.
------
From Valdes Jan 24, 1986:

1.  In IDENTIFY the 'l' always does a fit first before identifying
additional lines.
------
From Valdes Jan 21, 1986:

1.  HELP pages updated.

2.  The log information written by REIDENTIFY has been made more compact
and a option to futher reduce this log information "verbose" has been added.
------
From Valdes Jan 17, 1986:

1.  Bugs fixed affecting SPLOT and DISPCOR.
------
From Valdes Jan 6, 1986:

1.  Problem with cursor key 'o' in SENSFUNC fixed.

2.  The 's' shift option in IDENTIFY has been modified.  It now prints
the initial shift, the mean pixel shift, and the mean fractional shift
in user units.  This can be conveniently used for determining velocity
shifts from a standard.
------
From Valdes Jan 2, 1986:

1.  If the HA field was missing from a field it was being initialized to
0. which is a valid HA value.  This has been changed to initialize to -100.
This value will force recomputation of the HA when determining the air mass.

2.  A bug in computing the air mass when the HA is not defined was found
and fixed.
------
From Valdes Dec 30, 1985:

1.  A bug in DISPCOR when using a reference image and the directory
structured database has been fixed.
------
From Valdes Dec 9, 1985:

1.  NORMCONTINUUM has been renamed to CONTINUUM and modified to have the
output type as a hidden parameter.

2.  The standard line lists have been put in the directory stdlines$.
------
From Valdes Nov 26, 1985:

1.  SPLOT modified to use gtools graphics options.  These options are
accessed with :/ commands; i.e. ":/xwindow x1 x2" sets the x display
window.

2.  SPLOT parameter "auto" replaced by parameter "options" which allows
several plotting options to be given.  The options are given as a list of
possibly abbreviated strings.  The two options currently defined are
"auto" and "zero".  Auto is the same as before; it replots the graph
after any command that changes the graph.  Zero makes the initial
default for the graph have zero as the minimum Y.
------
From Valdes Nov 15, 1985:

1.  Modified IDENTIFY, REIDENTIFY, and DISPCOR to use directory type database
structure.  Instead of a single massive database textfile separate
database text files are created for each image in the database directory.
------
From Valdes Oct 28, 1985:

1.  Increased the efficiency of widstape from 7 seconds per spectrum to
about 2 seconds per spectrum by using low level formating.
------
From Valdes Oct 23, 1985:

1.  Bug fix to allow zero entries in the calibration files.
------
From Valdes Oct 9, 1985:

1.  Cursor parameter added to the tasks flatfit, splot, and standard.

2.  Defined widstape from ONEDSPEC package in the DATAIO package.  The
source and executable, however, still reside in ONEDSPEC (x_onedutil.e).
Widstape and widsout should be combined and the source put in DATAIO
at some point.
------
From Valdes Oct 7, 1985:

1.  Parameter indirections removed.

2.  Tasks IRS and IIDS moved to the IMRED package.  ONEDSPEC need not
be loaded directly.  The usually method should be to load IMRED and then
the appropriate instrument package.
------
From Valdes Oct 4, 1985:

1.  Add script task normcontinuum to fit the continuum of spectra and
output a continuum normalized spectrum.  This script is based on
images.fit1d.
------
From Valdes October 1, 1985:

1.  The source code for identify and reidentify has been moved from the
longslit package to the onedspec package since these tasks are essentially
one dimensional.

------
From Valdes August 19, 1985:

1.  Makelib file created to maintain archive for the onedspec package.
The archive is libods.a.  Makefile modified to use the library.
This removes all the .o files making directory easier to list.

2.  An attempt to write to an existing image in splot requires the
user to confirm.  Overwriting an existing image now maintains the pixel
files correctly.

3.  New script task revisions pages the package revision file.
.endhelp
