.help flatdiv Dec86 noao.imred.iids/noao.imred.irs
.ih
NAME
flatdiv -- Divide spectra by flat field spectra
.ih
USAGE
flatdiv input records
.ih
PARAMETERS
.ls input
The root file name for the input records to be divided.
.le
.ls records
The range of spectra to be included in the divide operation.
Each range item will be appended to the root name to form an
image file name.
.le
.ls output
New spectra are created by the flatdiv operation. This parameter
specifies the root name to be used for the created spectra.
.le
.ls start_rec
Each new spectrum created as "output" has its root name and a 
trailing number appended starting with "start_rec". Subsequent
output images will have an incremented trailing number.
Note that even if an output image is not created because the input
image has already been flattened or the input image is not found the
output record number is still incremented.
.le
.ls flat_file
The root name for the sensitivity spectra as produced by FLATFIT.
Normally with multi-aperture instruments, FLATFIT will produce a
spectrum appropriate to each aperture and the file name will have
"flat_file" as the file name root and the aperture number appended.
.le
.ls coincor = )_.coincor
If set to yes, coincidence correction is applied to the data during
the division, and the following three parameters are required.
For more about this correction see \fBcoincor\fR.
.ls ccmode = )_.ccmode
The mode by which the coincidence correction is to be performed.
This may be "iids" or "photo".
.le
.ls deadtime = )_.deadtime
The detector deadtime in seconds.
.le
.ls power = )_.power
Power law IIDS non-linear correction exponent.
.le
.le
.ih
DESCRIPTION
The input spectra are divided by the flat fields which are
represented by spectra produced by FLATFIT.

To avoid possible division by zero, any zeroes in the flat field
spectra generated by FLATFIT are replaced by 1.0.

The input spectra may optionally be corrected for coincidence losses.

If the input and output spectra (after appending the record numbers) are
the same then the division is performed in-place; i.e. the flattened spectra
replace the original input spectra.
Note that even if an output image is not created because the input
image has already been flattened or the input image is not found the
output record number is still incremented.  This is to insure that if
in-place division is desired that the input and output names remain
matched.
.ih
EXAMPLES
The following example divides a series of spectra to produce 20 new
spectra having names nite1.1221 ... nite1.1240.

	cl> flatdiv nite1 1201-1220 nite1 1221

The same spectra as above are simultaneously corrected for
coincidence losses.

	cl> flatdiv nite1 1201-1220 nite1 1221 coincor=yes

The flattened spectra replace the unflattened spectra.

	cl> flatdiv nite1 1201-1220 nite1 1201

Note that the input record numbers must be contiguous and the starting
output record number must be the same as the first input record number.
.ih
TIME REQUIREMENTS
Approximately 1 second is required to correct a spectrum of length
1024 points.
.ih
SEE ALSO
coincor, flatfit
.endhelp
