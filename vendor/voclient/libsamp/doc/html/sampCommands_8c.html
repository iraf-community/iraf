<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SAMP Client Library: sampCommands.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>sampCommands.c File Reference</h1>SAMP commands used by app to send administrative messages.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &quot;<a class="el" href="samp_8h_source.html">samp.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sampCommands_8c.html#84ffd50bd4b8dc79e9cf32398c6b3d69">samp_Register</a> (handle_t handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register with the <a class="el" href="structHub.html">Hub</a> using the currently stored metadata.  <a href="#84ffd50bd4b8dc79e9cf32398c6b3d69"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sampCommands_8c.html#106fc27544de7c25625ed60eb48e4edd">samp_UnRegister</a> (handle_t handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Un-Register from the hub.  <a href="#106fc27544de7c25625ed60eb48e4edd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sampCommands_8c.html#9c6024ae76103069355256c29ee22722">samp_DeclareMetadata</a> (handle_t handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">(Re)Declare all of our metadata.  <a href="#9c6024ae76103069355256c29ee22722"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sampCommands_8c.html#2be0812dc8d34c68407c62762f727c51">samp_Ping</a> (handle_t handle, <a class="el" href="samp_8h.html#2efe6d463d80744789f228f5dc4baa39">String</a> appName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ping the hub/app to see if it is alive (returns &gt;0).  <a href="#2be0812dc8d34c68407c62762f727c51"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="samp_8h.html#39a90bc041db57e1a6ba736ba91eee30">Map</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sampCommands_8c.html#2ac4b5c50094c394a74f18d6ebe3cd91">samp_GetMetadata</a> (handle_t handle, <a class="el" href="samp_8h.html#2efe6d463d80744789f228f5dc4baa39">String</a> pubId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the metadata for a specified app.  <a href="#2ac4b5c50094c394a74f18d6ebe3cd91"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sampCommands_8c.html#d2b0bdea58688142f55faeffcfc65525">samp_DeclareSubscriptions</a> (handle_t handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare the messages we're interested in.  <a href="#d2b0bdea58688142f55faeffcfc65525"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c4f65b6315c8bd7380176d2b97462354"></a><!-- doxytag: member="sampCommands.c::samp_GetSubscriptions" ref="c4f65b6315c8bd7380176d2b97462354" args="(handle_t handle, String pubId)" -->
<a class="el" href="samp_8h.html#39a90bc041db57e1a6ba736ba91eee30">Map</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>samp_GetSubscriptions</b> (handle_t handle, <a class="el" href="samp_8h.html#2efe6d463d80744789f228f5dc4baa39">String</a> pubId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="samp_8h.html#39f9d235896a8fd920f319105eb82791">List</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sampCommands_8c.html#954712a523e3f86826b4711abd35b165">samp_GetRegisteredClients</a> (handle_t handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get public-ids of the registered clients.  <a href="#954712a523e3f86826b4711abd35b165"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="samp_8h.html#39f9d235896a8fd920f319105eb82791">List</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sampCommands_8c.html#367a24fc0aa7a81416e6a0d0dbfcd93f">samp_GetSubscribedClients</a> (handle_t handle, <a class="el" href="samp_8h.html#2efe6d463d80744789f228f5dc4baa39">String</a> mtype)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get clients matching the mtype subscription.  <a href="#367a24fc0aa7a81416e6a0d0dbfcd93f"></a><br></td></tr>
</table>
<hr><h2>Detailed Description</h2>
SAMP commands used by app to send administrative messages. 
<p>
SAMPCOMMANDS.C -- SAMP commands used by app to send administrative messages.<p>
stat = samp_Register (handle) stat = samp_UnRegister (handle) stat = samp_DeclareMetadata (handle) stat = samp_Ping (handle, appName) map = samp_GetMetadata (handle, pubId) samp_DeclareSubscriptions (handle, subscripMap) map = samp_GetSubscriptions (handle) list = samp_GetRegisteredClients (handle) list = samp_GetSubscribedClients (handle, mtype)<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Mike Fitzpatrick </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>7/10/11 </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="9c6024ae76103069355256c29ee22722"></a><!-- doxytag: member="sampCommands.c::samp_DeclareMetadata" ref="9c6024ae76103069355256c29ee22722" args="(handle_t handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int samp_DeclareMetadata           </td>
          <td>(</td>
          <td class="paramtype">handle_t&nbsp;</td>
          <td class="paramname"> <em>handle</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
(Re)Declare all of our metadata. 
<p>
SAMP_DECLAREMETATA -- (Re)Declare all of our metadata.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>samp struct handle </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>SAMP_OK or SAMP_ERR </dd></dl>

<p>References <a class="el" href="samp_8h_source.html#l00196">Samp::hub</a>, <a class="el" href="sampHub_8c_source.html#l00026">hub</a>, and <a class="el" href="sampHub_8c_source.html#l00469">samp_hubDeclareMetadata()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d2b0bdea58688142f55faeffcfc65525"></a><!-- doxytag: member="sampCommands.c::samp_DeclareSubscriptions" ref="d2b0bdea58688142f55faeffcfc65525" args="(handle_t handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int samp_DeclareSubscriptions           </td>
          <td>(</td>
          <td class="paramtype">handle_t&nbsp;</td>
          <td class="paramname"> <em>handle</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Declare the messages we're interested in. 
<p>
SAMP_DECLARESUBSCRIPIONS -- Declare the messages we're interested in.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>samp struct handle </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>SAMP_OK or SAMP_ERR </dd></dl>

<p>References <a class="el" href="samp_8h_source.html#l00196">Samp::hub</a>, <a class="el" href="sampHub_8c_source.html#l00026">hub</a>, and <a class="el" href="sampHub_8c_source.html#l00509">samp_hubDeclareSubscriptions()</a>.</p>

<p>Referenced by <a class="el" href="samp_8c_source.html#l00344">samp_Unsubscribe()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2ac4b5c50094c394a74f18d6ebe3cd91"></a><!-- doxytag: member="sampCommands.c::samp_GetMetadata" ref="2ac4b5c50094c394a74f18d6ebe3cd91" args="(handle_t handle, String pubId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="samp_8h.html#39a90bc041db57e1a6ba736ba91eee30">Map</a> samp_GetMetadata           </td>
          <td>(</td>
          <td class="paramtype">handle_t&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="samp_8h.html#2efe6d463d80744789f228f5dc4baa39">String</a>&nbsp;</td>
          <td class="paramname"> <em>pubId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the metadata for a specified app. 
<p>
SAMP_GETMETADATA -- Get the metadata for a specified app.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>samp struct handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pubId</em>&nbsp;</td><td>App public-id </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Map to message response </dd></dl>

<p>References <a class="el" href="samp_8h_source.html#l00178">Samp::errortxt</a>, <a class="el" href="samp_8h_source.html#l00196">Samp::hub</a>, <a class="el" href="sampHub_8c_source.html#l00026">hub</a>, <a class="el" href="samp_8h_source.html#l00156">Hub::id</a>, and <a class="el" href="samp_8h_source.html#l00159">Hub::privateKey</a>.</p>

<p>Referenced by <a class="el" href="samp_8c_source.html#l00616">samp_mapClients()</a>.</p>

</div>
</div><p>
<a class="anchor" name="954712a523e3f86826b4711abd35b165"></a><!-- doxytag: member="sampCommands.c::samp_GetRegisteredClients" ref="954712a523e3f86826b4711abd35b165" args="(handle_t handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="samp_8h.html#39f9d235896a8fd920f319105eb82791">List</a> samp_GetRegisteredClients           </td>
          <td>(</td>
          <td class="paramtype">handle_t&nbsp;</td>
          <td class="paramname"> <em>handle</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get public-ids of the registered clients. 
<p>
SAMP_GETREGISTEREDCLIENTS -- Get public-ids of the registered clients.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>samp struct handle </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>handle to list of registered clients </dd></dl>

<p>References <a class="el" href="samp_8h_source.html#l00196">Samp::hub</a>, <a class="el" href="samp_8h_source.html#l00156">Hub::id</a>, <a class="el" href="samp_8h_source.html#l00159">Hub::privateKey</a>, <a class="el" href="sampList_8c_source.html#l00079">samp_listLen()</a>, <a class="el" href="sampList_8c_source.html#l00046">samp_newList()</a>, and <a class="el" href="sampList_8c_source.html#l00100">samp_setStringInList()</a>.</p>

<p>Referenced by <a class="el" href="samp_8c_source.html#l00616">samp_mapClients()</a>.</p>

</div>
</div><p>
<a class="anchor" name="367a24fc0aa7a81416e6a0d0dbfcd93f"></a><!-- doxytag: member="sampCommands.c::samp_GetSubscribedClients" ref="367a24fc0aa7a81416e6a0d0dbfcd93f" args="(handle_t handle, String mtype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="samp_8h.html#39f9d235896a8fd920f319105eb82791">List</a> samp_GetSubscribedClients           </td>
          <td>(</td>
          <td class="paramtype">handle_t&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="samp_8h.html#2efe6d463d80744789f228f5dc4baa39">String</a>&nbsp;</td>
          <td class="paramname"> <em>mtype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get clients matching the mtype subscription. 
<p>
SAMP_GETSUBSCRIBEDCLIENTS -- Get clients matching the mtype subscription.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>samp struct handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mtype</em>&nbsp;</td><td>mtype string </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>handle to list of clients having mtype subscription </dd></dl>

<p>References <a class="el" href="samp_8h_source.html#l00196">Samp::hub</a>, <a class="el" href="samp_8h_source.html#l00156">Hub::id</a>, <a class="el" href="samp_8h_source.html#l00159">Hub::privateKey</a>, <a class="el" href="sampList_8c_source.html#l00079">samp_listLen()</a>, <a class="el" href="sampList_8c_source.html#l00046">samp_newList()</a>, and <a class="el" href="sampList_8c_source.html#l00100">samp_setStringInList()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2be0812dc8d34c68407c62762f727c51"></a><!-- doxytag: member="sampCommands.c::samp_Ping" ref="2be0812dc8d34c68407c62762f727c51" args="(handle_t handle, String appName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int samp_Ping           </td>
          <td>(</td>
          <td class="paramtype">handle_t&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="samp_8h.html#2efe6d463d80744789f228f5dc4baa39">String</a>&nbsp;</td>
          <td class="paramname"> <em>appName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Ping the hub/app to see if it is alive (returns &gt;0). 
<p>
SAMP_PING -- Ping the hub/app to see if it is alive (returns &gt;0).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>samp struct handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>appName</em>&nbsp;</td><td>application name </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>OK or ERR if no response </dd></dl>

<p>References <a class="el" href="samp_8h_source.html#l00196">Samp::hub</a>, <a class="el" href="sampUtil_8c_source.html#l00147">samp_app2id()</a>, <a class="el" href="sampClient_8c_source.html#l00184">samp_callAll()</a>, <a class="el" href="sampClient_8c_source.html#l00230">samp_callAndWait()</a>, <a class="el" href="sampMap_8c_source.html#l00063">samp_freeMap()</a>, <a class="el" href="sampMsg_8c_source.html#l00053">samp_freeMsg()</a>, <a class="el" href="sampHub_8c_source.html#l00447">samp_hubPing()</a>, <a class="el" href="sampMsg_8c_source.html#l00109">samp_msgParam()</a>, <a class="el" href="sampMsg_8c_source.html#l00036">samp_newMsg()</a>, <a class="el" href="sampParam_8c_source.html#l00039">samp_newParam()</a>, and <a class="el" href="sampClient_8c_source.html#l00360">samp_setErr()</a>.</p>

</div>
</div><p>
<a class="anchor" name="84ffd50bd4b8dc79e9cf32398c6b3d69"></a><!-- doxytag: member="sampCommands.c::samp_Register" ref="84ffd50bd4b8dc79e9cf32398c6b3d69" args="(handle_t handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int samp_Register           </td>
          <td>(</td>
          <td class="paramtype">handle_t&nbsp;</td>
          <td class="paramname"> <em>handle</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Register with the <a class="el" href="structHub.html">Hub</a> using the currently stored metadata. 
<p>
SAMP_REGISTER -- Register with the <a class="el" href="structHub.html">Hub</a> using the currently stored metadata.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>samp struct handle </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>SAMP_OK or SAMP_ERR </dd></dl>

<p>References <a class="el" href="samp_8h_source.html#l00196">Samp::hub</a>, <a class="el" href="sampHub_8c_source.html#l00026">hub</a>, <a class="el" href="samp_8h_source.html#l00160">Hub::hubId</a>, <a class="el" href="samp_8h_source.html#l00156">Hub::id</a>, <a class="el" href="samp_8h_source.html#l00159">Hub::privateKey</a>, <a class="el" href="samp_8c_source.html#l00542">samp_replyStatus()</a>, <a class="el" href="samp_8h_source.html#l00152">Hub::secret</a>, and <a class="el" href="samp_8h_source.html#l00161">Hub::selfId</a>.</p>

</div>
</div><p>
<a class="anchor" name="106fc27544de7c25625ed60eb48e4edd"></a><!-- doxytag: member="sampCommands.c::samp_UnRegister" ref="106fc27544de7c25625ed60eb48e4edd" args="(handle_t handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int samp_UnRegister           </td>
          <td>(</td>
          <td class="paramtype">handle_t&nbsp;</td>
          <td class="paramname"> <em>handle</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Un-Register from the hub. 
<p>
SAMP_UNREGISTER -- Un-Register from the hub.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>samp struct handle </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>SAMP_OK or SAMP_ERR </dd></dl>

<p>References <a class="el" href="samp_8h_source.html#l00196">Samp::hub</a>, <a class="el" href="sampHub_8c_source.html#l00026">hub</a>, and <a class="el" href="sampHub_8c_source.html#l00359">samp_hubUnRegister()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Aug 31 13:23:14 2011 for SAMP Client Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
