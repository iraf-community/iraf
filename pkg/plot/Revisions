.help revisions Mar90 pkg.plot
.nf
pkg$plot/t_surface.x
	procedure surf_limits was modified to avoid an arithmetic exception
	for images with values entirely above ceiling or below floor.  This
	modification was coded by Phil Hodge at ST.	(ShJ 4/4/90)

pkg$plot/getdata.x
	procedure plt_getdata was completely rewritten to remove the call
	to imparse and any built-in dependency on knowledge of image 
	section notation.  				(ShJ 4/4/90)

pkg$plot/t_contour.x, t_surface.x, t_hafton.x
	were modified to call plt_getdata with its new calling sequence.
							(ShJ 4/4/90)
pkg$plot/t_pcol.x, t_pcols.x
pkg$plot/t_prow.x, t_prows.x
	The dependency of these routines on knowledge of image section
	notation has been removed.  Previously an image section name would
	be built using the column limits input by the user.  The data are
	now extracted from the image with procedure plt_gcols and plt_grows. 
	Code was also cleaned up to make use of single graphics procedure. 
	(MJF 4/3/90)

pkg$plot/doc/pvector.hlp
pkg$plot/t_pvector.x, pvector.par
	Implemented output options to PVECTOR task allowing computed
	vector to be output as an image or text file  (MJF 4/3/90)

pkg$plot/doc/surface.hlp
	Clarified floor and ceiling parmeters in surface manual page.  
							(ShJ 3/1/90)
pkg$plot/t_gkimos.x
	Added a call to flush the gki metacode stream before closing it
	when interactive=no.  Without this, the stdgraph terminal would
	remain in graphics mode when gkimosaic terminated.  (ShJ 3/8/89)

pkg$plot/t_pvector.x
	Fixed bug causing vectors near theta=0 to fail.  (FV 15/6/89)

pkg$plot/t_gkimos.x
	Duplicate definition of MAX_FRAMES removed.  A new option was
	added to cursor mode, 'r', to redraw the current screen with any 
	new parameters that may have been set.  Functionally equivalent
	to skip -NX*NY and hitting the space bar. 

	Error handling is improved.  GKIMOSAIC was failing when the
	WCSDIR information couldn't be decoded.  (ShJ 24/5/89)

pkg$plot/t_gkixt.x
	Added dynamic reallocation of index buffer for metacode files
	with more then MAX_FRAMES.   (ShJ 24/5/89)

pkg$plot/t_graph.x
	Fixed up setting the marker size when the marker type is either
	vertical or horizontal eror bars.  Previously, both xsize and
	ysize were being set equal to the user indicated size.  Now only
	the dimension that represents the error gets set; the other
	dimension is drawn at NDC size 1.0.  (ShJ 24/5/89)

pkg$plot/t_contour.x
	Axes were not being drawn properly when parameter 'perimeter' was
	set to no.  This was due to a missing nset=-1 statement which has
	now been added (line 171).  Variable nset is passed in a common
	block to the NCAR conrec code.  (ShJ 24/5/89)

pkg$plot/getdata.x, t_contour.x, t_surface.x, t_hafton.x
	Added support for subsampling or block averaging of image sections.
	The contour, surface and hafton tasks were not doing this correctly.
	The mod was coded by Zolt Levay of STScI.  (ShJ 18/7/88)

pkg$plot/vport.x
	Changed the value of 'ext' from 0.25 to 0.0625  This is the ratio
	of axes lengths beyond which contour will make the output viewport
	square.  The limit of 1:4 was too restrictive; the limit of 1:16 is
	also arbitrary but not as restrictive.  This change was also made in
	gio$ncarutil/conbd.f; this code is used instead of vport.x when
	parameter 'perimeter' = no (which is not the default).  (ShJ 10/6/88)

pkg$plot/initmarker.x
	Marker types 'hline', 'vline' and 'diamond' were added to the list
	of possible marker types in point mode.  (ShJ 24/3/88)

pkg$plot/initmarker.x
pkg$plot/graph.x
	Marker types 'hebar' and 'vebar' were added to the list of possible
	marker types in point mode.  Parameter 'szmarker' should be set
	to 0.0 for the third column of an input list to be interpreted
	as marker sizes in WCS units.  A duplicate copy of procedure
	init_marker existed in graph.x and it has been deleted.  (ShJ 23/3/88)
	
pkg$plot/vport.x
	Modified the viewport setting code to accomodate both landscape
	and portrait mode devices when compensating for non-unity aspect
	ratios.  (e.g., fill=no in contour).   Previously, only landscape 
	mode was considered.  This mod suggested by Zolt Levay at STScI.  
	(ShJ 16/12/87)

	if (aspect_ratio < 1.0)
	    # Landscape
	    xdis = xdis * aspect_ratio
	else if (aspect_ratio > 1.0)
	    # Portrait
	    ydis = ydis / aspect_ratio
------

pkg$plot/crtpict/t_crtpict.x
pkg$plot/crtpict/tform_image.x
pkg$plot/crtpict/crtpict.h
	Whether or not an annotated perimeter is drawn around the image
	portion of a crtpict is now controlled by the cl parameter
	'perimeter'.  Default value is yes.  (ShJ 20/8/87)

pkg$plot/crtpict/drawgraph.x
pkg$plot/crtpict/plot_hgrams.x
	The crtpict task now prints z1 and z2 (the range of input
	intensities mapped to output values) on the final print as
	well as to STDOUT.  The z1, z2, zmin and zmax values are
	now output in `%g' format, not `%.2f' format, which will 
	prevent truncation to 0.0 of very small values.  (SeH 23/4/87)

pkg$plot/graph.x	S. Hammond April 23, 1987
	A bug in the graph task, which prevented users from setting the 
	window when the values being plotted were very small (1E-7 or so), 
	has been fixed.  The task previously would insist on autoscaling
	the y axis in this case.

pkg$plot/contour.x	S. Hammond March 9, 1987
	The NCAR contour task was relinked with libncar to pick up a revision 
	in procedure STLINE which increased the size of a work array.  The
	error about "work array overflow in STLINE, picture incomplete"
	should be seen much less frequently now, as the buffer which
	stores starting points of contours at a given level was increased
	in size from 500 to 5000.

pkg$plot/crtpict/map_image.x	S. Hammond March 6, l987

	This procedure was using an incorrect test for finding images
	with no range in the data.  It was comparing the difference 
	between z1 and z2 to EPSILONR; it should have been testing z1 and z2 
	for equality.  The result of this error was that images containing
	only small valued pixels (<= e-8 or so) would be mapped entirely
	to a single grey level.  The error has been fixed.

pkg$plot/gkimosaic.x 	S. Hammond 	Feb 25, 1987

	The interactive help facility for task gkimosaic (keystroke '?')
	was modified to work properly with the newly installed gio mods for 
	activating and deactivating workstations.

pkg$plot/graph.x	S. Hammond	Feb 25, 1987

	Task graph would hang when the input file was STDIN, a byproduct of the
	recent gio mods for activating and deactivating workstations.  This
	has been fixed.  Another bug was also fixed: the marker size read
	from the third column of an input list now controls the marker size
	on the plot as described in the graph manual page.

----------------------------------------------------------------------------

From: Hammond    Dec 23, 1986
Task: contour   (gio$ncarutil/conrec.f)

	The ncar executable was relinked to pick up a mod to conrec.f
	in libncar.a.  The polyline width was not being set until after
	the first contour line had been drawn, and so the first major
	contour line would not be drawn in bold font.  

--------------------------------------------------------------------------

From: Hammond	 Oct 28, 1986
Task: graph     (pkg$plot/graph.x)

	A bug that prevented axes from being drawn properly when the
	lower window limit exceeded the upper limit has been fixed.
	That is, setting wy1 > wy2 now works.

_________________________________________________________________________

From: Hammond	Oct 24, 1986
Task: crtpict, contour  (pkg$plot/perim.x)

	The perimeter drawing procedure has been modified to 
	calculate the label increments and perimeter spacing
	independently in x and y.  This was not being done
	previously, and images which differ greatly in x and y
	dimension would produce unpleasing plots.

_______________________________________________________________________

From: Hammond	Jul 21, 1986
Task: gkimosaic

	An additional interactive command was added to gkimosaic.  A
	command summary is printed with the keystroke '?'.

_______________________________________________________________________

From: Hammond	Jun 25, 1986
Task: gkimosaic

    Task gkimosaic has been modified to allow interactive browsing
    through a metacode file.  Keystrokes are available to skip
    forward or backward through a file, and to interactively
    change the number of plots per page and the rotate and fill 
    options after each page of plots.  See the revised manual page
    for a complete description.  The WCS information for the individual 
    plots is preserved for cursor readback.

________________________________________________________________________

From: Hammond	Jun 18, 1986
Task: gkidir, gkiextract

	1.  Long strings in GKI_MFTITLE instructions were causing
	    memory overwrite errors in tasks gkidir and gkiextract; 
	    the problem has been fixed.

	2.  Tasks gkidir and gkiextract have been modified to filter 
	    out blank frames.
____________________________________________________________________________

From: Hammond	Jun 12, 1986
Task: prow, prows, pcol, pcols

      These four tasks have been modified to use the standard parameter
      names for window and viewport coordinates within the plot package.
      Window (user) coordinates are referred to as wx1, wx2, wy1, and wy1;  
      viewport (NDC) coordinates are referred to as vx1, vx2, vy1 and 
      vy2. Default values for these parameters have changed - see 
      the revised manual pages.  A 0 range in window coordinates implies 
      autoscaling; a 0 range in viewport coordinates indicates automatic 
      viewport placement by "glabax".

      An additional parameter ("fill") has been added.  By default,
      the plot drawn will fill the specified device viewport.  Setting the
      value of fill to "no" means equal numbers of data values in x
      and y will occupy equal physical lengths when plotted.  That is,
      a unity aspect ratio is enforced when fill = no.

_____________________________________________________________________________

From: Hammond	Jun 12, 1986
Task: graph

   Several changes have been made to task graph.  
   
   1. First, to standardize parameter names within the plot package, 
      the viewport coordinates are referred to as vx1, vx2, vy1 
      and vy2; window coordinates are referred to as wx1, wx2, wy1, 
      and wy2.  Default values for these parameters have changed - see 
      the revised manual page.  A 0 range in window coordinates implies 
      autoscaling; a 0 range in viewport coordinates indicates automatic 
      viewport placement by glabax.

   2. Image templates are now understood in the input list.

   3. An additional parameter ("fill") has been added.  By default,
      the plot drawn will fill the specified device viewport.  Setting
      the value of fill to "no" means equal numbers of data values in x
      and y will occupy equal physical lengths when plotted.  That is,
      a unity aspect ratio is enforced when fill = no.

________________________________________________________________________

From: Hammond	Jun 12, 1986
Task: contour, hafton

1. To standardize parameter names within the plot package, both these
   tasks now refer to the device viewport plotting coordinates 
   as vx1, vx2, vy1 and vy2. 

__________________________________________________________________________

From: Hammond	Apr 17, 1986
Task: gkiextrct

1.  A (boolean == false) construct in source file t_gkiextract.x has been
    changed to (! boolean).

___________________________________________________________________________

From: Hammond	Mar31, 1986
Task: crtpict

1. Crtpict now checks the values returned by the automatic windowing
   algorithm (ztrans=auto) to make sure they are not equal.  The window
   limits, z1 and z2, are equal to each other when there is no range 
   of intensity in the input image.  This was not being checked previously,
   and could result in floating divide by zero down the line.

_________________________________________________________________________

From: Rooke	Mar27, 1986
Task: calcomp

1. Changed default value for parameter LWOVER from "no" to "yes"; users
   feel it is more important to get plots out quickly than to have bold
   text, axes, and axis labels and ticks.  Calcomp line width simulation
   in lwtype=ntracing draws each line 5 times for medium quality and 9
   times for high quality.  Now must explicitly run CALCOMP standalone
   on spooled metacode to get bold text etc.
_________________________________________________________________________

From: Hammond	Mar19, 1986
Task: Contour, Surface, Hafton

1. The string "subsampled image ... being contoured" has been replaced
   with "subsampled image ... being plotted".  This message is printed
   when an image is subsampled rather than block averaged on input.  
   (The source file changed is plot$get_data.x)
__________________________________________________________________________

From: Hammond	Mar19, 1986
Task: gkidir, gkiextract

1. These tasks no longer truncate the GKI_MFTITLE string when printing
   output metacode titles.  It used to do this to insure that the
   output string would fit on one line, but a unique title string was
   not always being printed.
__________________________________________________________________________

From: Hammond 	Jan. 9, 1986
Task: Hafton

1. Hafton now allows for user control of the plotting viewport.

---------------------------------------------------------------------------

From: Hammond  	December 5, 1985
Task: Graph, Contour

1. Graph was ignoring a request for log scaling in y, this has been fixed.

2. Under some conditions, Contour will automatically scale the values it
   chooses for contour labels.  When this happens, the label under the
   plot now says so and reports the scaling factor.
.endhelp
