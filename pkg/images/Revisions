.help revisions Jun88 pkg.images
.nf
pkg$images
    Added world coordinate system support to the following tasks: imshift,
    shiftlines, magnify, imtranspose, blkrep, blkavg, rotate, imlintran,
    register and geotran. The only limitation is that register and geotran
    will only support simple linear transformations. 
    (2/24/90 Davis)
    
pkg$images/geometry/geotimtran.x
    Fixed a problem in the boundary extension "reflect" option code for small
    images which was causing odd values to be inserted at the edges of the
    image.
    (2/14/90 Davis)

pkg$images/iminfo/imhistogram.x
    A new parameter "hist_type" was added to the imhistogram task giving
    the user the option of plotting the integral, first derivative and
    second derivative of the histogram as well as the normal histogram.
    Code was contributed by Rob Seaman.
    (2/2/90 Davis)

pkg$images/geometry/geogmap.x
    The path name of the help file was being erroneously renamed with
    the result that when users ran the double precision version of the
    code they could not find the help file.
    (26/1/90 Davis)

pkg$images/filters/t_boxcar.x,t_convolve.x
    Added some checks for 1-D images.
    (1/20/90 Davis)

pkg$images/iminfo/t_imstat.x,imstat.h
    Made several minor bug fixes and alterations in the imstatistics task
    in response to user complaints and suggestions.

    1. Changed the verbose parameter to the format parameter. If format is
    "yes" (the default) then the selected fields are printed in fixed format
    with column labels. Other wise the fields are printed in free format
    separated by 2 blanks. This fixes the problem of fields running together.

    2. Fixed a bug in the code which estimates the median from the image
    histogram by linearly interpolating around the midpt of the integrated
    histogram. The bug occurred when more than half the pixels were in the
    first bin.

    3. Added a check to ensure that the number of fields did not overflow
    the fields array.

    4. Removed the extraneous blank line printed after the title.

    5. The pound sign is now printed at the beginning of the column header
    string regardless of which field is printed first. In the previous
    versions it was only being printed if the image name field was
    printed first.

    6. Changed the name of the median field to midpt in response to user
    confusions about how the median is computed.

    (1/20/90, Davis)

pkg$images/imutil/t_imslice.hlp
    The imslice was not correctly computing the number of lines in the
    output image in the case where the slice dimension was 1.
    (12/4/89, Davis)

pkg$images/doc/imcombine.hlp
    Clarified and documented definitions of the scale, offset, and weights.
    (11/30/89, Valdes)

pkg$images/geometry/geotran.x
    High order surfaces of a certain functional form could occasionally
    produce out of bounds pixel errors. The bug was caused by not properly
    computing the distortion of the image boundary for higher order
    surfaces.
    (11/21/89, Davis)

pkg$images/geometry/imshift.x
    The circulating buffer space was not being freed after each execution
    of IMSHIFT. This did not cause an error in execution but for a long
    list of frames could result in alot of memory being tied up.
    (10/25/89, Davis)

pkg$images/imarith/t_imarith.x
    IMARITH is not prepared to deal with images sections in the output.
    It used to look for '[' to decide if the output specification included
    and image section.  This has been changed to call the IMIO procedure
    imgsection and check if a non-null section string is returned.
    Thus it is up to IMIO to decide what part of the image name is
    an image section.  (9/5/89, Valdes)

pkg$images/imarith/imcmode.gx
    Fixed bug causing infinite loop when computing mode of constant value
    section.  (8/14/89, Valdes)

====
V2.8
====

pkg$images/iminfo/t_imstat.x
    Davis, Jun 15, 1989
    Added a couple of switches to that skew and kurtosis are not computed
    if they are not to be printed.

pkg$images/iminfo/t_imstat.x
    Davis, Jun 14, 1989
    A simple mod was made to the skew and kurtosis computation to avoid
    divide by zero errors in case of underflow.

pkg$images/imutil/chpixtype.par
    Davis, Jun 13, 1989
    The parameter file has been modified to accept an output pixel
    type of ushort.

pkg$images/imarith/imcombine.gx
    Valdes, Jun 2, 1989
    A new scheme to detect file errors is now used.

pkg$images/imfit/t_imsurfit.x
    Davis, Jun 1, 1989
    1. If the user set regions = "sections" but the sections file
    did not exist the task would go into an infinite loop. The problem
    was a missing error check on the open statement.

pkg$images/iminfo/imhistogram.x,imhistogram.par
    Davis, May 31, 1989
    A new version of imhistogram has been installed. These mods have
    been made over a period of a month by Doug Tody and Rob Seaman.
    The mods include
    1. An option to turn off log scaling of the y axis of the histogram plot.
    2. A new autoscale parameter which avoids aliasing problems for integer
       data.
    3. A new parameter top_close which resolves the ambiguity in the top
       bin of the histogram.

pkg$images/imarith/imcombine.gx
   Valdes, May 9, 1989
   Because a file descriptor was not reserved for string buffer operations
   and a call to stropen in cnvdate was not error checked the task would
   hang when more than 115 images were combined.  Better error checking
   was added and now an error message is printed when the maximum number
   of images that can be combined is exceeded.

pkg$images/imarith/t_imarith.x
   Valdes, May 6, 1989
   Operations in which the output image has an image section are now
   skipped with a warning message.

pkg$images/imarith/sigma.gx
pkg$images/imarith/imcmode.gx
    Valdes, May 6, 1989
    1.  The weighted sigma was being computed incorrectly.
    2.  The argument declarations were wrong for integer input images.
	Namely the mean vector is always real.
    3.  Minor change to imcmode.gx to return correct datatype.

pkg$images/imstack,imslice
    Davis, April 1, 1989
    The proto images tasks imstack and imslice have been moved from the
    proto package to the images package. Imstack is unchanged except that
    it now supports the image data types USHORT and COMPLEX. Imslice has
    been modified to allow slicing along any dimension of the image instead
    of just the highest dimension.

pkg$images/imstatistics.
    Davis, Mar 31, 1989
    1. A totally new version of the imstatistics task has been written
    and replaces the old version. The new task allows the user to select
    which statistical parameters to compute and print. These include
    the mean, median, mode, standard deviation, skew, kurtosis and the
    minimum and maximum pixel values.

pkg$images/imhistogram.par
pkg$images/iminfo/imhistogram.x
pkg$images/doc/imhistogram.hlp
    Davis, Mar 31, 1989
    1. The imhistogram task has been modified to plot "box" style histograms
    as well as "line" type histograms. Type "line" remains the default.

pkg$images/geometry/geotran.par,register.par,geomap.par
pkg$images/doc/geomap.hlp,register.hlp,geotran.hlp
    Davis, Mar 6, 1989
    1. Improved the parameter prompting in GEOMAP, REGISTER and GEOTRAN
    and improved the help pages.
    2. Changed GEOMAP database quantities "xscale" and "yscale" to "xmag"
    and "ymag" for consistency . Geotran was changed appropriately.

pkg$images/imarith/imcmode.gx
    For short data a short variable was wraping around when there were
    a significant number of saturated pixels leading to an infinite loop.
    The variables were made real regardless of the image datatype.
    (3/1/89, Valdes)
 
pkg$images/imutil/imcopy.x
    Davis, Feb 28, 1989
    1. Added support for type USHORT to the imcopy task. This is a merged
    ST modification.

pkg$images/imarith/imcthreshold.gx
pkg$images/imcombine.par
pkg$images/doc/imcombine.hlp
pkg$images/imarith/imcscales.x
    Valdes, Feb 16, 1989
    1.  Added provision for blank value when all pixels are rejected by the
        threshold.
    2.  Fixed a bug that was improperly scaling images in the threshold option.
    3.  The offset printed in the log now has the opposite sign so that it
	is the value "added" to bring images to a common level.

pkg$images/imfit/imsurfit.x
    Davis, Feb 23, 1989
    Fixed a bug in the median fitting code which could cause the porgram
    to go into an infinite loop if the region to be fitted was less than
    the size of the whole image.

pkg$images/geometry/t_magnify.x
    Davis, Feb 16, 1989
    Modified magnify to work on 1D images as well as 2D images. The
    documentation has been updated.

pkg$images/geometry/t_geotran.x
    Davis, Feb 15, 1989
    Modified the GEOTRAN and REGISTER tasks so that they can handle a list
    of transform records one for each input image.

pkg$images/imarith/imcmode.gx
    Valdes, Feb 8, 1989
    Added test for nx=1.
 
pkg$images/imarith/t_imcombine.x
    Valdes, Feb 3, 1989
    The test for the datatype of the output sigma image was wrong.
 
pkg$images/iminfo/listpixels.x,listpixels.par
    Davis, Feb 6, 1989
    The listpixels task has been modified to print out the pixels for a 
    list of images instead of a single image only. A title line for each
    image listed can optionally be printed on the standard output if
    the new parameter verbose is set to yes.

pkg$images/geometry/t_imshift.x
    Davis, Feb 2, 1989
    Added a new parameter shifts_file to the imshift task. Shifts_file
    is the name of a text file containing the the x and yshifts for
    each input image to be shifted. The number of input shifts must
    equal the number of input images.

pkg$images/geometry/t_geomap.x
    Davis, Jan 17, 1989
    Added an error message for the case where the coordinates is empty
    of there are no points in the specified data range. Previously the
    task would proceed to the next coordinate file without any message.

pkg$images/geometry/t_magnify.x
    Davis, Jan 14, 1989
    Added the parameter flux conserve to the magnify task to bring it into
    line with all the other geometric transformation tasks.

pgk$images/geometry/geotran.x,geotimtran.x
    Davis, Jan 2, 1989
    A bug was fixed in the flux conserve code. If the x and y reference
    coordinates  are not in pixel units and are not 1 then
    the computed flux per pixel was too small by xscale * yscale.

pkg$images/filters/acnvrr.x,convolve.x,boxcar.x,aboxcar.x
    Davis, Dec 27, 1988
    I changed the name of the acnvrr procedure to cnv_radcnvr to avoid
    a name conflict with a vops library procedure. This only showed
    up when shared libraries were implemented. I also changed the name
    of the aboxcarr procedure to cnv_aboxr to avoid conflict with the
    vops naming conventions.

pkg$images/imarith/imcaverage.gx
    Davis, Dec 22, 1988
    Added an errchk statement for imc_scales and imgnl$t to stop the
    program bombing with segmentation violations when mode <= 0.

pkg$images/imarith/imcscales.x
    Valdes, Dec 8, 1988
    1.  IMCOMBINE now prints the scale as a multiplicative quantity.
    2.  The combined exposure time was not being scaled by the scaling
	factors resulting in a final exposure time inconsistent with the
	data.

pkg$images/iminfo/imhistogram.x
    Davis, Nov 30, 1988
    Changed the list+ mode so that bin value and count are printed out instead
    of bin count and value. This makes the plot and list modes compatable.

pkg$images/iminfo/t_imstat.x
    Davis, Nov 17, 1988
    Added the n=n+1 back into the inner loop of imstat.

pkg$images/geotran.par,register.par
    Davis, Nov 11 , 1988
    Fixed to glaring errors in the parameter files for register and geotran.
    Xscale and yscale were described as pixels per reference unit when
    they should be reference units per pixel. The appropriate bug fix has been
    made.

pkg$images/geometry/t_geotran.x
    Davis, November 7, 1988
    The routine gsrestore was not being error checked. If either of the
    input x or y coordinate surface was linear and the other was not,
    the message came back GSRESTORE: Illegal x coordinate. This bug has
    been fixed.

pkg$images/imarith/imcombine.gx
    Valdes, October 19, 1988
    A vops clear routine was not called generically causing a crash with
    double images.

pkg$images/filters/t_fmedian.x,t_median.x,t_fmode.x,t_mode.x,t_gradient.x
    t_gauss.x,t_boxcar.x,t_convolve.x,t_laplace.x
    Davis, October 4, 1988
    I fixed a bug in the error handling code for the filters tasks. If
    and error occurred during task execution and the input image name was
    the same as the output image name then the input image was trashed.

pkg$images/imarith/imcscales.gx
    Valdes, September 28, 1988
    It is now an error for the mode to be nonpositive when scaling or weighting.

pkg$images/imarith/imcmedian.gx
    Valdes, August 16, 1988
    The median option was selecting the n/2 value instead of (n+1)/2.  Thus,
    for an odd number of images the wrong value was being determined for the
    median.

pkg$images/geometry/t_imshift.x
    Davis, August 11, 1988
    1. Imshift has been modified to uses the optimized code if nearest
    neighbour interpolation is requested. A nint is done on the shifts
    before calling the quick shift routine.
    2. If the requested pixel shift is too large imshift will now
    clean up any pixelless header files before continuing execution.

pkg$images/geometry/blkavg.gx
    Davis, July 13, 1988
    Blkavg has been fixed so that it will work on 1D images.

pkg$images/geometry/t_imtrans.x,imtrans.x
    Davis, July 12, 1988
    Imtranspose has been modified to work on complex images.

pkg$images/imutil/t_chpix.x
    Davis, June 29, 1988
    A new task chpixtype has been added to the images package. Chpixtype
    changes the pixel types of a list of images to a specified output pixel
    type. Seven data types are supported "short", "ushort", "int", "long"
    "real" and "double".

pkg$images/geometry/rotate.cl,imlintran.cl,t_geotran.x
    Davis, June 10, 1988
    The rotate and imlintran scripts have been rewritten to use procedure
    scripts. This removes all the annoying temporary cl variables which
    appear when the user does an lpar. In previous versions of these
    two tasks the output was restricted to being the same size as the input
    image. This is still the default case, but the user can now set the
    ncols and nrows parameters to the desired output size. I ncols or nlines
    < 0 then then the task compute the output image size required to contain
    the whole input image.

pkg$images/filters/t_convolve.x,t_laplace.x,t_gradient.x,t_gauss.x,convolve.x
    Davis, June 1, 1988
    The convolution operators laplace, gauss and convolve have been modified
    to make use of radial symmetry in the convolution kernel. In gauss and
    laplace the change is transparent to the user. For the convolve operator
    the user must indicate that the kernel is radially symmetric by setting
    the parameter radsym. For kernels of 7 by 7 or greater the speedup
    in timings is on the order of 30% on the Vax 750 with the fpa.

pkg$images/imarith/imcmode.gx
    Valdes, Apr 11, 1988
    1.  The use of a mode sections was handled incorrectly.

pkg$images/imfit/fit1d.x
    Valdes, Jan 4, 1988
    1.  Added an error check for a failure in IMMAP.  The missing error check
	caused FIT1D to hang when a bad input image was specified.

pkg$images/magnify.par
pkg$images/imcombine.par
pkg$images/imarith/imcmode.gx
pkg$images/doc/imarith.hlp
    Valdes, Dec 7, 1987
    1.  Added option list to parameter prompts.
    2.  Fixed minor typo in help page
    3.  The mode calculation in IMCOMBINE would go into an infinite loop
	if all the pixel values were the same.  If all the pixels are the
	same them it skips searching for the mode and returns the constant
	number.

pkg$images/geometry/geotimtran.x
    Davis, Nov 25, 1987
    1. A bug in the boundary extension = wrap option was found in the
    IMLINTRAN task. The problem occured in computing values for out of
    bounds pixels in the range 0.0 < x < 1.0, ncols < x < ncols + 1.0,
    0.0 < y < 1.0 and nlines < y < nlines + 1.  The computed coordinates
    were falling outside the boundaries of the interpolation array.

pkg$images/geometry/t_geomap.x,geograph.x
    Davis, Nov 19, 1987
    1. The geomap task now writes the name of the output file into the database.
    2. Rotation angles of 360. degrees have been altered to 0 degrees.

pkg$images/imfit/t_imsurfit.x,imsurfit.x
pkg$images/lib/ranges.x
    Davis, Nov 2, 1987
    A bug in the regions fitting option of the IMSURFIT task has been found
    and fixed. This bug would occur when the user set the regions parameter
    to sections and then listed section which overlapped each other. The
    modified ranges package was not handling the overlap correctly and
    computing a number of points which was incorrect.

pkg$images/imarith/* +
    Valdes, Sep 30, 1987
    The directory was reorganized to put generic code in the subdirectory
    generic.

    A new task called IMCOMBINE has been added.  It provides for combining
    images by a number of algorithms, statistically weighting the images
    when averaging, scaling or offsetting the images by the exposure time
    or image mode before combining, and rejecting deviant pixels.  It is
    almost fully generic including complex images and works on images of
    any dimension.

pkg$images/geometry/geotran.x
    Davis, Sept 3, 1987
    A bug in the flux conserving algorithm was found in the geotran code.
    The symptom was that the flux of the output image occasionally was
    negative. This would happen when two conditions were met, the transformation
    was of higher order than a simple rotation, magnification, translation
    and an axis flip was involved. The mathematical interpretation of this
    bug is that the coordinate surface had turned upside down. The solution
    for people running systems with this bug is to multiply there images
    by -1.

pkg$images/imfit/imsurfit.h,t_imsurfit.x
    Davis, Aug 6, 1987
    A new option was added to the parameter regions in the imsurfit task.
    Imsurfit will now fit a surface to a single circular region defined
    by an x and y center and a radius.

pkg$images/geometry/geotimtran.x
    Davis, Jun 15, 1987
    Geotran and register were failing when the output image number of rows
    and columns was different from the input number of rows and columns.
    Geotran was mistakenly using the input images sizes to determine the
    number of output lines that should be produced. The same problem occurred
    when the values of the boundary pixels were being computed. The program
    was using the output image dimensions to compute the boundary pixels
    instead of the input image dimensions.

pkg$images/geometry/geofit.x,geogmap.x
    Davis, Jun 11, 1987
    A bug in the error checking code in the geomap task was fixed. The
    condition of too few points for a reasonable was not being trapped
    correctly. The appropriate errchk statements were added.

pkg$images/geomap.par
    Davis, Jun 10, 1987
    The default fitting function was changed to polynomial. This will satisfy
    most users who wish to do shifts, rotations, and magnifications and
    avoid the neccessity of correctly setting the xmin, xmax, ymin, and ymax
    parameters. For the chebyshev and legendre polynomial functions these
    parameters must be explicitly set.  For reference coordinates in pixel
    units the normal settings are 1, ncols, 1 and nlines respectively.

pkg$images/iminfo/hselect.x,imheader.x,images$/imutil/hselect.x
    Davis, Jun 8, 1987
    Imheader has been modified to open an image with the default min_lenuserarea
    Hselect and hedit will now open the image setting the user area to the
    maximum of 28800 chars or the min_lenuser environment variable.

pkg$images/iminfo/t_imstat.x
    Davis, May 22, 1987
    An error in the image minimum computation was corrected. This error
    would show up most noiticeably if imstat was run on a 1 pixel image.
    The min value would be left set to MAX_REAL.

pkg$images/filters/mkpkg
    Davis, May 22, 1987
    I added mach.h to the dependency file list of t_fmedian.x and
    recompiled. The segmentation violations I had been getting in the
    program disappeared.

pkg$images/t_shiftlines.x,shiftlines.x
    Davis, April 15, 1987
    1. I changed the names of the procedures shiftlines and shiftlinesi
    to sh_lines and sh_linesi. When the original names were contracted
    to 6 letter fortran names they became shifti and shifts which just
    so happens to collide with shifti and shifts in the subdirectory
    osb. On VMS this was causing problems with the shareable libraries.
    If images was linked with -z there was no problem.

pkg$images/imarith/t_imsum.x
    Valdes, March 24, 1987
    1.  IMSUM was failing to unmap images opened to check image dimensions
	in a quick first pass through the image list.  This is probably
	the source of the out of files problem with STF images.  It may
	be the source of the out of memory problem reported from AOS/IRAF.

pkg$images/imfit/fit1d.x
pkg$images/imfit/mkpkg
    Valdes, March 17, 1987
    1. Added error checking for the illegal operation in which both input
       and output image had an image section.  This was causing the task
       to crash.  The task now behaves properly in this circumstance and
       even allows the fitted output to be placed in an image section of
       an existing output image (even different than the input image
       section) provided the input and output images have the same sizes.

pkg$images/t_convolve.x
    Davis, March 3, 1987
    1. Fixed the kernel decoding routine in the convolve task so that
    it now recognizes the row delimter character in string entry mode.

pkg$images/geometry,filters
    Davis, February 27, 1987
    1. Changed all the imseti (im, TY_BNDRYPIXVAL, value) calls to imsetr.

pkg$images/t_minmax.x,minmax.x
    Davis, February 24, 1987
    1. Minmax has been changed to compute the minimum and maximum pixel
    as well as the minimum and maximum pixel values. The pixels are output
    in section notation and stored in the minmax parameter file.

pkg$images/t_magnify.x
    Davis, February 19, 1987
    1. Magnify was aborting with the error MSIFIT: Too few datapoints
    when trying to reduce an image using the higher order interpolants
    poly3, poly5 and spline3. I increased the NEDGE defined constant
    from 2 to three and modified the code to use the out of bounds
    imio.

pkg$images/geograph.x,geogmap.x
    Davis, February 17, 1987
    1. Geomap now uses the gpagefile routine to page the .keys file.
    The :show command deactivates the workstation before printing a
    block of text and reactivates it when it is finished.

pkg$images/geometry/geomap,geotran
    Davis, January 26, 1987
    1. There have been substantial changes to the geomap, and geotrans
    tasks and those tasks rotate, imlintran and register which depend
    on them.
    2. Geomap has been changed to be able to compute a transformation
    in both single and double precision.
    3. The geotran code has been speeded up considerably. A simple rotate
    now takes 70 seconds instead of 155 seconds using bilinear interpolation.
    4. Two new cl parameters nxblock and nyblock have been added to the
    rotate, imlintran, register and geotran tasks. If the output image
    is smaller than these parameters then the entire output image
    is computed at once. Otherwise the output image is computed in blocks
    nxblock by nyblock in size.
    5. The 3 geotran parameters rotation, scangle and flip have been replaced
    with two parameters xrotation and yrotation which serve the same purpose.

pkg$images/geometry/t_shiftlines.x,shiftlines.x
    Davis, January 19, 1987
    1. The shiftlines task has been completely rewritten. The following
    are the major changes.
    2. Shiftlines now makes use of the imio boundary extension operations.
    Therefore the four options: nearest pixel, reflect, wrap and constant
    boundary extension are available.
    3. The interpolation code has been vectorised. The previous version
    was using the function call asieval for every output pixel evaluated.
    The asieval call were replaced with asivector calls.
    4. An extra CL parameter constant to support constant boundary
    exension was added.
    5. The shiftlines help page was modified and the date changed to
    January 1987.

pkg$images/imfit/imsurfit.x
    Davis, January 12, 1987
    1. I changed the amedr call to asokr calls. For my application it did
    not matter whether the input array is left partially sorted and the asokr
    routine is more efficient.

pkg$images/lib/pixlist.x
    Davis, December 12, 1986
    1. A bug in the pl_get_ranges routine caused the routine to fail when the
    number of ranges got too large. The program could not detect the end of
    the ranges and would go into an infinite loop.

pkg$images/iminfo/t_imstat.x
    Davis, December 3, 1986
    1. Imstat was failing on constant images because finite machine precision
    could result in a negative sigma squared. Added a check for this condition.

pkg$images/filters/fmode.x
    Davis, October 27, 1986
    1. Added a check for 0 data range before calling amapr.

pkg$images/imarith/imsum.gx
    Valdes, October 20, 1986
    1. Found and fixed bug in this routine which caused pixel rejection
    to fail some fraction of the time.

pkg$images/geometry/blkrp.gx
    Valdes, October 13, 1986
    1.  There was a bug when the replication factor for axis 1 was 1.

pkg$images/iminfo/imhistogram.x
    Hammond, October 8, 1986
    1. Running imhistogram on a constant valued image would result in
       a "floating divide by zero fault" in ahgm.  This condition is
       now trapped and a warning printed if there is no range in the data.

pkg$images/tv/doc/cvl.hlp
    Valdes, October 7, 1986
    1.  Typo in V2.3 documentation fixed: "zcale" -> "zscale".

pkg$images/fit1d.par
    Valdes, October 7, 1986
    1.  When querying for the output type the query was:

Type of output (fit, difference, ratio) (fit|difference|ratio) ():

    	The enumerated values were removed since they are given in the
	prompt string.

pkg$images/imarith/t_imsum.x
pkg$images/imarith/imsum.gx
pkg$images/do/imsum.hlp
    Valdes, October 7, 1986
    1.  Medians or pixel rejection with more than 15 images is now
	correct.  There was an error in buffering.
    2.  Averages of integer datatype images are now correct.  The error
	was caused by summing the pixel values divided by the number
	of images instead of summing the pixel values and then dividing
	by the number of images.
    3.  Option keywords may now be abbreviated.
    4.  The output pixel datatype now defaults to the calculation datatype
	as is done in IMARITH.  The help page was modified to indicate this.
    5.  Dynamic memory is now used throughout to reduce the size of the
	executable.
    6.  The bugs 1-2 are present in V2.3 and not in V2.2.

pkg$images/imarith/t_imarith.x
pkg$images/imarith.par
pkg$images/doc/imarith.hlp
    Valdes, October 6, 1986
    1.  The parameter "debug" was changed to "noact".  "debug" is reserved
	for debugging information.
    2.  The output pixel type now defaults to the calculation datatype.
    3.  The datatype of constant operands is determined with LEXNUM.  This
	fixes a bug in which a constant such as "1." was classified as an
	integer.
    4.  Trailing whitespace in the string for a constant operand is allowed.
	This fixes a bug with using "@" files created with the task FIELDS
	from a table of numbers.  Trailing whitespace in image names is
	not checked for since this should be taken care of by lower level
	system services.
    5.  The reported bug with the "max" operation not creating a pixel file
	was the result of the previous round of changes.  This has been
	corrected.  This problem does not exist in the released version.
    6.  All strings are now dynamically allocated.  Also IMTOPENP is used
	to open a CL list directly.
    7.  The help page was revised for points (1) and (2).

pkg$images/fmode.par
pkg$images/fmd_buf.x
pkg$images/med_sort.x
    Davis, September 29, 1986
    1. Changed the default value of the unmap parameter in fmode to yes. The
       documentation was changed and the date modified.
    2. Added a test to make sure that the input image was not a constant
       image in fmode and fmedian.
    3. Fixed the recently added swap macro in the sort routines which
       was giving erroneous results for small boxes in tasks median and mode.

pkg$images/imfit/fit1d.x
    Valdes, September 24, 1986
    1.  Changed subroutine name with a VOPS prefix to one with a FIT1D
	prefix.

pkg$images/imarith/t_imdivide.x
pkg$images/doc/imdivide.hlp
pkg$images/imdivide.par
    Valdes, September 24, 1986
    1.  Modified this ancient and obsolete task to remove redundant
	subroutines now available in the VOPS library.
    2.  The option to select action on zero divide was removed since
	there was only one option.  Parameter file changed.
    3.  Help page revised.

pkg$images/geometry/t_blkrep.x +
pkg$images/geometry/blkrp.gx +
pkg$images/geometry/blkrep.x +
pkg$images/doc/blkrep.hlp +
pkg$images/doc/mkpkg
pkg$images/images.cl
pkg$images/images.men
pkg$images/images.hd
pkg$images/x_images.x
    Valdes, September 24, 1986
    1.  A new task called BLKREP for block replicating images has been added.
	This task is a complement to BLKAVG and performs a function not
	available in any other way.
    2.  Help for BLKREP has been added.

pkg$images/imarith/t_imarith.x
pkg$images/imarith/imadiv.gx
pkg$images/doc/imarith.hlp
pkg$images/imarith.par
    Valdes, September 24, 1986
    1.  IMARITH has been modified to provide replacement of divisions
	by zero with a constant parameter value.
    2.  The documentation has been revised to include this change and to
	clarify and emphasize areas of possible confusion.

pkg$images/doc/magnify.hlp
pkg$images/doc/blkavg.hlp
    Valdes, September 18, 1986
    1.  The MAGNIFY help document was expanded to clarify that images with axis
        lengths of 1 cannot be magnified.  Also a discussion of the output
	size of a magnified image.  This has been misunderstood often.
    2.  Minor typo fix for BLKAVG.

images$geometry/blkav.gx: Davis, September 7, 1986
    1. The routine blkav$t was declared a function but called everywhere as
    a procedure. Removed the function declaration.

images$filters/med_sort.x: Davis, August 14, 1986
    1. A bug in the sorting routine for MEDIAN and MODE in which the doop
    loop increment was being set to zero has been fixed. This bug was
    causing MEDIAN and MODE to fail on class 6 for certain sized windows.

images$imfit/fit1d.x: Davis, July 24, 1986
    1. A bug in the type=ratio option of fit1d was fixed. The iferr call
    on the vector operator adivr was not trapping a divide by zero
    condition. Changed adivr to adivzr.

images$iminfo/listpixels.x: Davis, July 21, 1986
    1. I changed a pargl to pargi for writing out the column number of the
    pixels.

images$iminfo/t_imstat.x: Davis, July 21, 1986
    1. I changed a pargr to a pargd for the double precision quantitiies
    sum(MIN) and sum(MAX).

images$imfit/t_lineclean.x: Davis, July 14, 1986
    1. Bug in the calling sequence for ic_clean fixed. The ic pointer
    was not being passed to ic_clean causing access violation and/or
    segmentation violation errors.

images$imfit/fit1d.x, lineclean.x:  Valdes, July 3, 1986
    1.  FIT1D and LINECLEAN modified to use new ICFIT package.

From Valdes June 19, 1986

1. The help page for IMSUM was modified to explicitly state what the
median of an even number of images does.

-----------------------------------------------------------------------------

From Davis June 13, 1986

1. A bug in CONVOLVE in which insufficient space was being allocated for
long (> 161 elements) 1D kernels has been fixed. CONVOLVE was not
allocating sufficent extra space.

-----------------------------------------------------------------------------

From Davis June 12, 1986

1. I have changed the default value of parameter unmap in task FMEDIAN to
yes to preserve the original data range.

2. I have changed the value of parameter row_delimiter from \n to ;.

-----------------------------------------------------------------------------

From Davis May 12, 1986

1. Changed the angle convention in GAUSS so that theta is the angle of the
major axis with respect to the x axis measured counter-clockwise as specified
in the help page instead of the negative of that angle.

-----------------------------------------------------------------------------

From Davis Apr 28, 1986

1. Moved geomap.key to lib$scr and made redefined HELPFILE in geogmap.x
appropriately.

------------------------------------------------------------------------------

images$imarith/imsum.gx:  Valdes Apr 25, 1986
    1.  Fixed bug in generic code which called the real VOPS operator
	regardless of the datatype.  This caused IMSUM to fail on short
	images.

From Davis Apr 17, 1986

1. Changed constructs of the form boolean == false in the file imdelete.x
to ! boolean.

------------------------------------------------------------------------------

images$imarith:  Valdes, April 8, 1986
    1.  IMARITH has been modified to also operate on a list of specified
	header parameters.  This is primarily used when adding images to
	also added the exposure times.  A new parameter was added and the
	help page modified.
    2.  IMSUM has been modified to also operate on a list of specified
	header parameters.  This is primarily used when summing images to
	also sum the exposure times.  A new parameter was added and the
	help page modified.

------------------------------------------------------------------------------

From Valdes Mar 24, 1986:

1.  When modifying IMARITH to handle mixed dimensions the output image header
was made a copy of the image with the higher dimension.  However, the default
when the images were of the same dimension changed to be a copy of the second
operand.  This has been changed back to being a copy of the first operand
image.

------------------------------------------------------------------------------

From Davis Mar 21, 1986:

1. A NULL pointer bug in the subroutine plfree inside IMSURFIT was causing
segmentation violation errors. A null pointer test was added to plfree.

------------------------------------------------------------------------------

From Davis Mar 20, 1986:

1. A bug involving in place operations in several image tasks has been  fixed.

------------------------------------------------------------------------------

From Davis Mar 19, 1986:

1. IMSURFIT no longer permits the input image to be replaced by the output
image.

2. The tasks IMSHIFT, IMTRANSPOSE, SHIFTLINES, and GEOTRAN  have been modified
to use the images tools xt_mkimtemp and xt_delimtemp for in place
calculations.

-------------------------------------------------------------------------------

From Valdes Mar 13, 1986:

1.  Bug dealing with type coercion in short datatype images in IMARITH and IMSUM
which occurs on the SUN has been fixed.
------
From Valdes Mar 10, 1986:

1.  IMSUM has been modified to work on any number of images.

2.  Modified the help page
------
From Valdes Feb 25, 1986:

There have been two changes to IMARITH:

1.  A bug preventing use of image sections has been removed.

2.  An improvement allowing use of images of different dimension.
The algorithm is as follow:

	a.  Check if both operands are images.  If not the output
	image is a copy of the operand image.

	b.  Check that the axes lengths are the same for the dimensions
	in common.  For example a 3D and 2D image must have the same
	number of columns and lines.

	c.  Set the output image to be a copy of the image with the
	higher dimension.

	d.  Repeat the operation over the lower dimensions for each of
	the higher dimensions.

For example, consider subtracting a 2D image from a 3D image.  The output
image will be 3D and the 2D image is subtracted from each band of the
3D image.  This will work for any combination of dimensions.  Another
example is dividing a 3D image by a 1D image.  Then each line of each
plane and each band will be divided by the 1D image.  Likely applications
will be subtracting biases and darks and dividing by response calibrations
in stacked observations.

3.  Modified the help page
===========
Release 2.2
===========
From Davis Mar 6, 1986:

1. A serious bug had crept into GAUSS after I made some changes. For 2D
images the sense of the sigma was reversed, i.e sigma = 2.0 was actually
sigma = 0.5. This bug has now been fixed.

---------------------------------------------------------------------------

From Davis Jan 13, 1986:

1. Listpixels will now print out complex pixel values correctly.

---------------------------------------------------------------------------

From Davis Dec 12, 1985:

1. The directional gradient operator has been added to the images package.

---------------------------------------------------------------------------

From Valdes Dec 11, 1985:

1.  IMARITH has been modified to first check if an operand is an existing
file.  This allows purely numeric image names to be used.

---------------------------------------------------------------------------

From Davis Dec 11, 1985:

1. A Laplacian (second derivatives) operator has been added to the images
package.

---------------------------------------------------------------------------

From Davis Dec 10, 1985:

1. The new convolution tasks  boxcar, gauss and convolve have been added
to the images package. Convolve convolves an image with an arbitrary
user supplied rectangular kernel. Gauss convolves an image with a 2D
Gaussian of arbitrary size. Boxcar will smooth an image using a smoothing
window of arbitrary size.

2. The images package source code has been reorganized into the following
subdirectories: 1) filters 2) geometry 3) imfit 4) imarith 4) iminfo and
5) imutil 6) lib. Lib contains routines which may be of use to several IRAF
tasks such as ranges. The imutil subdirectory contains tasks which modify
images in some way such as hedit. The iminfo subdirectory contains code
for displaying header and pixel values and other image characteristics
such as the histogram. Image arithmetic and fitting routines are found
in imarith and imfit respectively. Filters contains the convolution and
median filtering routines and geometry contains the geometric distortion
corrections routines.

3. The documentation of the main images package has been brought into
conformity with the new IRAF standards.

4. Documentation for imdelete, imheader, imhistogram, listpixels and
sections has been added to the help database.

5. The parameter structure for imhistogram has been simplified. The
redundant parameters sections and setranges have been removed.

---------------------------------------------------------------------------


From Valdes Nov 4, 1985:

1.  IMCOPY modified so that the output image may be a directory.  Previously
logical directories were not correctly identified.
------

From Davis Oct 21, 1985:

1. A bug in the pixel rejection cycle of IMSURFIT was corrected. The routine
make_ranges in ranges.x was not successfully converting a sorted list of
rejected pixels into a list of ranges in all cases.

2. Automatic zero divide error checking has been added to IMSURFIT.
------
From Valdes Oct 17, 1985:

1.  Fit1d now allows averaging of image lines or columns when interactively
setting the fitting parameters.  The syntax is "Fit line = 10 30"; i.e.
blank separated line or column numbers.  A single number selects just one
line or column.  Be aware however, that the actual fitting of the image
is still done on each column or line individually.

2.  The zero line in the interactive curve fitting graphs has been removed.
This zero line interfered with fitting data near zero.
------
From Rooke Oct 10, 1985:

1.  Blkaverage was changed to "blkavg" and modified to support any allowed
number of dimensions.  It was also made faster in most cases, depending on 
the blocking factors in each dimension.
------
From Valdes Oct 4, 1985:

1.  Fit1d and lineclean modified to allow separate low and high rejection
limits and rejection iterations.
------
From Davis Oct 3, 1985:

1. Minmax was not calculating the minimum correctly for integer images.
because the initial values were not being set correctly.
------
From Valdes Oct 1, 1985:

1. Imheader was modified to print the image history.  Though the history
mechanism is little used at the moment it should become an important part
of any image.

2.  Task revisions renamed to revs.
------
From Davis Sept 30, 1985:

1. Two new tasks median and fmedian have been added to the images package.
Fmedian is a fast median filtering algorithm for integer data which uses
the histogram of the image to calculate the median at each window. Median
is a slower but more general algorithm which performs the same task.
------
From Valdes August 26, 1985:

1.  Blkaverage has been modified to include an new parameter called option.
The current options are to average the blocks or sum the blocks.
------
From Valdes August 7, 1985

1.  Fit1d and lineclean wer recompiled with the modified icfit package.
The new package contains better labeling and graph documentation.

2.  The two tasks now have parameters for setting the graphics device
and reading cursor input from a file.
______
From: /u2/davis/ Tue 08:27:09 06-Aug-85
Package: images
Title: imshift bug
 
Imshift was shifting incorrectly when an integral pixel shift in x and
a fractional pixel shift in y was requested. The actual x shift was
xshift + 1. The bug has been fixed and imshift will now work correctly for
any combination of fractional and integral pixel shifts
------
From: /u2/davis/ Fri 18:14:12 02-Aug-85
Package: images
Title: new images task
 
A new task GEOMAP has been added to the images package. GEOMAP calculates
the spatial transformation required to map one image onto another.
------
From: /u2/davis/ Thu 16:47:49 01-Aug-85
Package: images
Title: new images tasks
 
The tasks ROTATE, IMLINTRAN and GEODISTRAN have been added to the images
package. ROTATE rotates and shifts an image. IMLINTRAN will rotate, rescale
and shift an an image. GEODISTRAN corrects an image for geometric distortion.
------
From Valdes July 26, 1985:

1.  The task revisions has been added to page revisions to the images
package.  The intent is that each package will have a revisions task.
Note that this means there may be multiple tasks named revisions loaded
at one time.  Typing revisions alone will give the revisions for the
current package.  To get the system revisions type system.revisions.

2.  A new task called fit1d replaces linefit.  It is essentially the same
as linefit except for an extra parameter "axis" which selects the axis along
which the functions are to be fit.  Axis 1 is lines and axis 2 is columns.
The advantages of this change are:

	a.  Column fitting can now be done without transposing the image.
	    This allows linefit to be used with image sections along
	    both axes.
	b.  For 1D images there is no prompt for the line number.
.endhelp
